{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"text-align\": \"center\",\n    \"margin-top\": \"20px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _component_el_col = _resolveComponent(\"el-col\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  return _openBlock(), _createBlock(_component_el_row, {\n    gutter: 20,\n    style: {\n      \"padding\": \"20px\"\n    }\n  }, {\n    default: _withCtx(() => [_createCommentVNode(\" 左侧申请列表 \"), _createVNode(_component_el_col, {\n      span: 15\n    }, {\n      default: _withCtx(() => [_cache[1] || (_cache[1] = _createElementVNode(\"div\", {\n        class: \"section-title\"\n      }, \"我的门店申请记录\", -1 /* HOISTED */)), _createVNode(_component_el_table, {\n        data: $setup.tableData,\n        style: {\n          \"width\": \"100%\",\n          \"margin-top\": \"10px\"\n        }\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_table_column, {\n          prop: \"request_id\",\n          label: \"申请ID\",\n          width: \"100\"\n        }), _createVNode(_component_el_table_column, {\n          prop: \"target_city\",\n          label: \"目标城市\",\n          width: \"180\"\n        }), _createVNode(_component_el_table_column, {\n          prop: \"comment\",\n          label: \"否决原因\"\n        }), _createVNode(_component_el_table_column, {\n          prop: \"examine\",\n          label: \"状态\",\n          width: \"120\"\n        }, {\n          default: _withCtx(({\n            row\n          }) => [_createVNode(_component_el_tag, {\n            type: row.examine === 0 ? 'success' : row.examine === 1 ? 'danger' : 'warning'\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(row.examine === 0 ? '已通过' : row.examine === 1 ? '被打回' : '审核中'), 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"data\"]), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_pagination, {\n        background: \"\",\n        layout: \"prev, pager, next, ->, total\",\n        total: $setup.total,\n        \"current-page\": $setup.pageNum,\n        \"page-size\": $setup.pageSize,\n        onCurrentChange: $setup.handlePageChange\n      }, null, 8 /* PROPS */, [\"total\", \"current-page\", \"page-size\"])])]),\n      _: 1 /* STABLE */\n    }), _createCommentVNode(\" 右侧提交表单 \"), _createVNode(_component_el_col, {\n      span: 9\n    }, {\n      default: _withCtx(() => [_cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n        class: \"section-title\"\n      }, \"发起新申请\", -1 /* HOISTED */)), _createVNode(_component_el_form, {\n        model: $setup.newRequest,\n        \"label-width\": \"80px\",\n        style: {\n          \"margin-top\": \"20px\"\n        }\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_form_item, {\n          label: \"目标城市\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: $setup.newRequest.target_city,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.newRequest.target_city = $event),\n            placeholder: \"请输入城市名称\"\n          }, null, 8 /* PROPS */, [\"modelValue\"])]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_form_item, null, {\n          default: _withCtx(() => [_createVNode(_component_el_button, {\n            type: \"primary\",\n            onClick: $setup.submitRequest\n          }, {\n            default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"提交申请\")])),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"model\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["style","_createBlock","_component_el_row","gutter","default","_withCtx","_createCommentVNode","_createVNode","_component_el_col","span","_createElementVNode","class","_component_el_table","data","$setup","tableData","_component_el_table_column","prop","label","width","row","_component_el_tag","type","examine","_createTextVNode","_toDisplayString","_","_hoisted_1","_component_el_pagination","background","layout","total","pageNum","pageSize","onCurrentChange","handlePageChange","_component_el_form","model","newRequest","_component_el_form_item","_component_el_input","modelValue","target_city","_cache","$event","placeholder","_component_el_button","onClick","submitRequest"],"sources":["C:\\Users\\32561\\Desktop\\毕设仓库\\beauty-front\\src\\views\\Mine\\MyRequest.vue"],"sourcesContent":["<script setup>\r\nimport { onMounted, ref } from \"vue\"\r\nimport { ElMessage } from \"element-plus\"\r\nimport { offlineRequestList, addRequest } from \"@/api/offline\"\r\n\r\nconst tableData = ref([])\r\nconst pageNum = ref(1)\r\nconst pageSize = ref(10)\r\nconst total = ref(0)\r\n\r\n// 新申请表单\r\nconst newRequest = ref({\r\n  target_city: \"\"\r\n})\r\n\r\nconst fetchMyRequests = async () => {\r\n  try {\r\n    const res = await offlineRequestList({\r\n      pageNum: pageNum.value,\r\n      pageSize: pageSize.value\r\n    })\r\n    tableData.value = res.data.items || []\r\n    total.value = res.data.total || 0\r\n  } catch (err) {\r\n    ElMessage.error(err.msg || \"获取申请列表失败\")\r\n  }\r\n}\r\n\r\nconst handlePageChange = (newPage) => {\r\n  pageNum.value = newPage\r\n  fetchMyRequests()\r\n}\r\n\r\nconst submitRequest = async () => {\r\n  if (!newRequest.value.target_city.trim()) {\r\n    return ElMessage.warning(\"请填写目标城市\")\r\n  }\r\n  try {\r\n    console.log(newRequest.value.target_city)\r\n    await addRequest(newRequest.value)\r\n    ElMessage.success(\"申请已提交\")\r\n    newRequest.value.target_city = \"\"\r\n    fetchMyRequests()\r\n  } catch (err) {\r\n    ElMessage.error(err.msg || \"提交失败\")\r\n  }\r\n}\r\n\r\nonMounted(() => {\r\n  fetchMyRequests()\r\n})\r\n</script>\r\n\r\n<template>\r\n\r\n  <el-row :gutter=\"20\" style=\"padding: 20px\">\r\n    <!-- 左侧申请列表 -->\r\n    <el-col :span=\"15\">\r\n      <div class=\"section-title\">我的门店申请记录</div>\r\n      <el-table :data=\"tableData\" style=\"width: 100%; margin-top: 10px\">\r\n        <el-table-column prop=\"request_id\" label=\"申请ID\" width=\"100\" />\r\n        <el-table-column prop=\"target_city\" label=\"目标城市\" width=\"180\" />\r\n        <el-table-column prop=\"comment\" label=\"否决原因\" />\r\n        <el-table-column prop=\"examine\" label=\"状态\" width=\"120\">\r\n          <template #default=\"{ row }\">\r\n            <el-tag\r\n                :type=\"row.examine === 0 ? 'success' : row.examine === 1 ? 'danger' : 'warning'\"\r\n            >\r\n              {{\r\n                row.examine === 0\r\n                    ? '已通过'\r\n                    : row.examine === 1\r\n                        ? '被打回'\r\n                        : '审核中'\r\n              }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <div style=\"text-align: center; margin-top: 20px\">\r\n        <el-pagination\r\n            background\r\n            layout=\"prev, pager, next, ->, total\"\r\n            :total=\"total\"\r\n            :current-page=\"pageNum\"\r\n            :page-size=\"pageSize\"\r\n            @current-change=\"handlePageChange\"\r\n        />\r\n      </div>\r\n    </el-col>\r\n\r\n    <!-- 右侧提交表单 -->\r\n    <el-col :span=\"9\">\r\n      <div class=\"section-title\">发起新申请</div>\r\n      <el-form :model=\"newRequest\" label-width=\"80px\" style=\"margin-top: 20px\">\r\n        <el-form-item label=\"目标城市\">\r\n          <el-input v-model=\"newRequest.target_city\" placeholder=\"请输入城市名称\" />\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitRequest\">提交申请</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<style scoped>\r\n.section-title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  background-color: #eef1f6;\r\n  padding: 10px 15px;\r\n  border-left: 5px solid #409EFF;\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}