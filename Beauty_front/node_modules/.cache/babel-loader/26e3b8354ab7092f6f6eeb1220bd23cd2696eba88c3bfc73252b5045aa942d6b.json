{"ast":null,"code":"import { ref, onMounted, nextTick } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nimport { getChatList, getHistory, sendMessage, setMessageRead } from '@/api/prMessage';\nimport { userOtherInfoService, userInfoService } from '@/api/user';\nimport RichTextEditor from \"@/components/RichTextEditor.vue\";\nexport default {\n  __name: 'MyMessage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const chatList = ref([]);\n    const activeChat = ref(null);\n    const messages = ref([]);\n    const inputMessage = ref('');\n    const pageNum = ref(1);\n    const pageSize = ref(20);\n    const loadingMessages = ref(false);\n    const currentUser = ref({});\n    const chatBodyRef = ref(null);\n    const router = useRouter();\n    const goBack = () => {\n      router.back();\n    };\n\n    // 获取当前用户信息\n    const fetchCurrentUser = async () => {\n      try {\n        const res = await userInfoService();\n        if (res.data) {\n          currentUser.value = res.data; // 成功后赋值\n          console.log('[Chat] 当前登录用户信息:', currentUser.value);\n        }\n      } catch (err) {\n        if (err?.response?.status === 401) {\n          console.warn('[Chat] 用户未登录，跳过');\n        } else {\n          console.error('[Chat] 获取当前用户信息失败:', err);\n          ElMessage.error('无法获取当前登录信息');\n        }\n      }\n    };\n    const fetchChatList = async () => {\n      try {\n        const res = await getChatList();\n        console.log('聊天列表完整响应:', res);\n        if (res.code === 0) {\n          const list = res.data || [];\n          // 批量补充头像昵称\n          for (const chat of list) {\n            try {\n              const userRes = await userOtherInfoService(chat.target_id);\n              if (userRes.data && userRes.code === 0) {\n                chat.nickname = userRes.data.nickname;\n                chat.user_pic = userRes.data.user_pic;\n              } else {\n                chat.nickname = '未知用户';\n                chat.user_pic = '';\n              }\n            } catch (err) {\n              console.error('拉取用户信息失败', err);\n              chat.nickname = '未知用户';\n              chat.user_pic = '';\n            }\n          }\n          chatList.value = list;\n          console.log('赋值后的chatList:', chatList.value);\n        } else {\n          console.error('后端返回失败:', res);\n          ElMessage.error(res.msg || '获取聊天列表失败');\n        }\n      } catch (err) {\n        console.error('请求异常:', err);\n        ElMessage.error('网络错误');\n      }\n    };\n\n    // 拉取聊天记录\n    const fetchMessages = async () => {\n      if (!activeChat.value) return;\n      loadingMessages.value = true;\n      try {\n        const res = await getHistory({\n          pageNum: pageNum.value,\n          pageSize: pageSize.value,\n          target_id: activeChat.value.target_id\n        });\n        if (res.code === 0) {\n          messages.value = res.data || [];\n          await nextTick();\n          scrollToBottom();\n        } else {\n          ElMessage.error(res.msg || '拉取聊天记录失败');\n        }\n      } catch (err) {\n        console.error('请求聊天记录异常:', err);\n        ElMessage.error('获取消息失败');\n      } finally {\n        loadingMessages.value = false;\n      }\n    };\n\n    // 选择聊天对象\n    const selectChat = async chat => {\n      activeChat.value = chat;\n      pageNum.value = 1;\n      await setMessageRead(chat.target_id); // 先设置已读\n      await fetchMessages(); // 再拉聊天记录\n      await fetchChatList(); // 最后重新拉聊天列表，更新未读数\n    };\n\n    // 发送消息\n    const sendMsg = async () => {\n      if (!inputMessage.value.trim() || !activeChat.value) return;\n      try {\n        await sendMessage({\n          to_id: activeChat.value.target_id,\n          content: inputMessage.value.trim()\n        });\n        inputMessage.value = '';\n        await fetchMessages();\n      } catch (err) {\n        ElMessage.error('发送失败');\n      }\n    };\n\n    // 自动滚动到底\n    const scrollToBottom = () => {\n      if (chatBodyRef.value) {\n        chatBodyRef.value.scrollTop = chatBodyRef.value.scrollHeight;\n      }\n    };\n    onMounted(async () => {\n      await fetchCurrentUser();\n      await fetchChatList();\n    });\n    const __returned__ = {\n      chatList,\n      activeChat,\n      messages,\n      inputMessage,\n      pageNum,\n      pageSize,\n      loadingMessages,\n      currentUser,\n      chatBodyRef,\n      router,\n      goBack,\n      fetchCurrentUser,\n      fetchChatList,\n      fetchMessages,\n      selectChat,\n      sendMsg,\n      scrollToBottom,\n      ref,\n      onMounted,\n      nextTick,\n      get useRouter() {\n        return useRouter;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get getChatList() {\n        return getChatList;\n      },\n      get getHistory() {\n        return getHistory;\n      },\n      get sendMessage() {\n        return sendMessage;\n      },\n      get setMessageRead() {\n        return setMessageRead;\n      },\n      get userOtherInfoService() {\n        return userOtherInfoService;\n      },\n      get userInfoService() {\n        return userInfoService;\n      },\n      RichTextEditor\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","nextTick","useRouter","ElMessage","getChatList","getHistory","sendMessage","setMessageRead","userOtherInfoService","userInfoService","RichTextEditor","chatList","activeChat","messages","inputMessage","pageNum","pageSize","loadingMessages","currentUser","chatBodyRef","router","goBack","back","fetchCurrentUser","res","data","value","console","log","err","response","status","warn","error","fetchChatList","code","list","chat","userRes","target_id","nickname","user_pic","msg","fetchMessages","scrollToBottom","selectChat","sendMsg","trim","to_id","content","scrollTop","scrollHeight"],"sources":["C:/Users/32561/Desktop/毕设仓库/beauty-front/src/views/Mine/MyMessage.vue"],"sourcesContent":["<script setup>\r\nimport {ref, onMounted, nextTick} from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport {ElMessage} from 'element-plus'\r\nimport {getChatList, getHistory, sendMessage, setMessageRead} from '@/api/prMessage'\r\nimport {userOtherInfoService, userInfoService} from '@/api/user'\r\nimport RichTextEditor from \"@/components/RichTextEditor.vue\";\r\n\r\nconst chatList = ref([])\r\nconst activeChat = ref(null)\r\nconst messages = ref([])\r\nconst inputMessage = ref('')\r\nconst pageNum = ref(1)\r\nconst pageSize = ref(20)\r\nconst loadingMessages = ref(false)\r\nconst currentUser = ref({})\r\nconst chatBodyRef = ref(null)\r\n\r\nconst router = useRouter()\r\n\r\nconst goBack = () => {\r\n  router.back()\r\n}\r\n\r\n// 获取当前用户信息\r\nconst fetchCurrentUser = async () => {\r\n  try {\r\n    const res = await userInfoService()\r\n    if (res.data) {\r\n      currentUser.value = res.data  // 成功后赋值\r\n      console.log('[Chat] 当前登录用户信息:', currentUser.value)\r\n    }\r\n  } catch (err) {\r\n    if (err?.response?.status === 401) {\r\n      console.warn('[Chat] 用户未登录，跳过')\r\n    } else {\r\n      console.error('[Chat] 获取当前用户信息失败:', err)\r\n      ElMessage.error('无法获取当前登录信息')\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\nconst fetchChatList = async () => {\r\n  try {\r\n    const res = await getChatList()\r\n    console.log('聊天列表完整响应:', res)\r\n\r\n    if (res.code === 0) {\r\n      const list = res.data || []\r\n      // 批量补充头像昵称\r\n      for (const chat of list) {\r\n        try {\r\n          const userRes = await userOtherInfoService(chat.target_id)\r\n          if (userRes.data && userRes.code === 0) {\r\n            chat.nickname = userRes.data.nickname\r\n            chat.user_pic = userRes.data.user_pic\r\n          } else {\r\n            chat.nickname = '未知用户'\r\n            chat.user_pic = ''\r\n          }\r\n        } catch (err) {\r\n          console.error('拉取用户信息失败', err)\r\n          chat.nickname = '未知用户'\r\n          chat.user_pic = ''\r\n        }\r\n      }\r\n      chatList.value = list\r\n      console.log('赋值后的chatList:', chatList.value)\r\n    } else {\r\n      console.error('后端返回失败:', res)\r\n      ElMessage.error(res.msg || '获取聊天列表失败')\r\n    }\r\n  } catch (err) {\r\n    console.error('请求异常:', err)\r\n    ElMessage.error('网络错误')\r\n  }\r\n}\r\n\r\n\r\n// 拉取聊天记录\r\nconst fetchMessages = async () => {\r\n  if (!activeChat.value) return\r\n  loadingMessages.value = true\r\n  try {\r\n    const res = await getHistory({\r\n      pageNum: pageNum.value,\r\n      pageSize: pageSize.value,\r\n      target_id: activeChat.value.target_id\r\n    })\r\n    if (res.code === 0) {\r\n      messages.value = res.data || []\r\n      await nextTick()\r\n      scrollToBottom()\r\n    } else {\r\n      ElMessage.error(res.msg || '拉取聊天记录失败')\r\n    }\r\n  } catch (err) {\r\n    console.error('请求聊天记录异常:', err)\r\n    ElMessage.error('获取消息失败')\r\n  } finally {\r\n    loadingMessages.value = false\r\n  }\r\n}\r\n\r\n// 选择聊天对象\r\nconst selectChat = async (chat) => {\r\n  activeChat.value = chat\r\n  pageNum.value = 1\r\n  await setMessageRead(chat.target_id)  // 先设置已读\r\n  await fetchMessages()                 // 再拉聊天记录\r\n  await fetchChatList()                 // 最后重新拉聊天列表，更新未读数\r\n}\r\n\r\n\r\n// 发送消息\r\nconst sendMsg = async () => {\r\n  if (!inputMessage.value.trim() || !activeChat.value) return\r\n  try {\r\n    await sendMessage({\r\n      to_id: activeChat.value.target_id,\r\n      content: inputMessage.value.trim()\r\n    })\r\n    inputMessage.value = ''\r\n    await fetchMessages()\r\n  } catch (err) {\r\n    ElMessage.error('发送失败')\r\n  }\r\n}\r\n\r\n\r\n// 自动滚动到底\r\nconst scrollToBottom = () => {\r\n  if (chatBodyRef.value) {\r\n    chatBodyRef.value.scrollTop = chatBodyRef.value.scrollHeight\r\n  }\r\n}\r\n\r\nonMounted(async () => {\r\n  await fetchCurrentUser()\r\n  await fetchChatList()\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div class=\"main-content\">\r\n    <el-button type=\"primary\" plain class=\"back-btn\" @click=\"goBack\">\r\n      返回首页\r\n    </el-button>\r\n    <div class=\"message-page\">\r\n      <div class=\"chat-list\">\r\n        <div\r\n            v-for=\"chat in chatList\"\r\n            :key=\"chat.target_id\"\r\n            class=\"chat-item\"\r\n            :class=\"{ active: activeChat && activeChat.target_id === chat.target_id }\"\r\n            @click=\"selectChat(chat)\"\r\n        >\r\n          <el-avatar :src=\"chat.user_pic\" size=\"large\">{{ chat.nickname ? chat.nickname[0] : '?' }}</el-avatar>\r\n          <div class=\"chat-info\">\r\n            <div class=\"chat-name\">{{ chat.nickname }}</div>\r\n            <div class=\"chat-last\">{{ chat.lastMessage }}</div>\r\n          </div>\r\n          <el-badge :value=\"chat.unReadCount\" v-if=\"chat.unReadCount > 0\"/>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"chat-window\" v-if=\"activeChat\">\r\n        <div class=\"chat-header\">\r\n          与 {{ activeChat.nickname }} 的聊天\r\n        </div>\r\n\r\n        <div class=\"chat-body\" ref=\"chatBodyRef\" v-loading=\"loadingMessages\">\r\n          <div v-for=\"msg in messages\" :key=\"msg.message_id\" class=\"chat-message\"\r\n               :class=\"{ 'me': msg.from_id === currentUser.user_id }\">\r\n            <div class=\"chat-content\">{{ msg.content }}</div>\r\n            <div class=\"chat-time\">{{ new Date(msg.created_at).toLocaleString() }}</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"chat-input\">\r\n          <RichTextEditor\r\n              v-model=\"inputMessage\"\r\n              style=\"height: 200px\"\r\n              :visible=\"true\"\r\n          />\r\n          <el-button type=\"primary\" @click=\"sendMsg\" style=\"height: 60px ;margin-top: 10px;\">发送</el-button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"chat-window\" v-else>\r\n        <div class=\"chat-placeholder\">请选择一个聊天</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.main-content {\r\n  flex: 1;\r\n  width: 1720px;\r\n  margin: 0 auto;\r\n  background: #f5f7fa;\r\n}\r\n.message-page {\r\n  display: flex;\r\n  width: 1720px;\r\n  margin: 0 auto;\r\n  margin-bottom: 10px;\r\n  height: 86vh;\r\n  background: #f5f7fa;\r\n}\r\n\r\n.chat-list {\r\n  width: 300px;\r\n  background: white;\r\n  border-right: 1px solid #ddd;\r\n  overflow-y: auto;\r\n}\r\n\r\n.chat-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 15px;\r\n  cursor: pointer;\r\n  border-bottom: 1px solid #eee;\r\n  transition: background-color 0.3s, box-shadow 0.3s;\r\n}\r\n\r\n.chat-item:hover {\r\n  background: #f0faff;\r\n}\r\n\r\n.chat-item.active {\r\n  background: #e6f7ff;\r\n  box-shadow: inset 4px 0 0 #409eff; /* 左边一条蓝色高亮条 */\r\n}\r\n\r\n.chat-info {\r\n  margin-left: 10px;\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\n\r\n.chat-name {\r\n  font-weight: bold;\r\n  margin-bottom: 5px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.chat-last {\r\n  color: #999;\r\n  font-size: 12px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n\r\n.chat-window {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.chat-header {\r\n  background: white;\r\n  padding: 15px;\r\n  border-bottom: 1px solid #ddd;\r\n  font-weight: bold;\r\n}\r\n\r\n.chat-body {\r\n  flex: 1;\r\n  padding: 15px;\r\n  overflow-y: auto;\r\n  background: #f9f9f9;\r\n}\r\n\r\n.chat-message {\r\n  margin-bottom: 10px;\r\n  max-width: 60%;\r\n  word-break: break-word;\r\n}\r\n\r\n.chat-message.me {\r\n  margin-left: auto;\r\n  text-align: right;\r\n}\r\n\r\n.chat-content {\r\n  display: inline-block;\r\n  background: #409eff;\r\n  color: white;\r\n  padding: 10px;\r\n  border-radius: 8px;\r\n}\r\n\r\n.chat-message.me .chat-content {\r\n  background: #67c23a;\r\n}\r\n\r\n.chat-time {\r\n  font-size: 10px;\r\n  color: #999;\r\n  margin-top: 5px;\r\n}\r\n\r\n.chat-input {\r\n  display: flex;\r\n  padding: 15px;\r\n  background: white;\r\n  border-top: 1px solid #ddd;\r\n}\r\n\r\n.chat-placeholder {\r\n  margin: auto;\r\n  font-size: 20px;\r\n  color: #ccc;\r\n}\r\n\r\n.back-btn {\r\n  margin: 5px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}