{"ast":null,"code":"import { createRouter, createWebHistory } from 'vue-router';\nimport Login_Register from \"@/views/Login_Register.vue\";\nimport HomePage from \"@/views/HomePage.vue\";\nimport ManagePage from \"@/views/ManagePage.vue\";\nimport ChangeRole from \"@/views/manage/user/ChangeRole.vue\";\nimport ClassManage from \"@/views/manage/creation/ClassManage.vue\";\nimport TagManage from \"@/views/manage/creation/TagManage.vue\";\nimport CreationManage from \"@/views/manage/creation/CreationManage.vue\";\nimport CreationExamine from \"@/views/manage/creation/CreationExamine.vue\";\nimport HairstyleManage from \"@/views/manage/hairstyle/HairstyleManage.vue\";\nimport RequestManage from \"@/views/manage/offline/RequestManage.vue\";\nimport { useTokenStore } from \"@/stores/token\";\n\n//定义路由关系\nconst routes = [{\n  path: \"/login\",\n  component: Login_Register\n}, {\n  path: \"/\",\n  component: HomePage,\n  meta: {\n    requiresAuth: true\n  }\n}, {\n  path: \"/manage\",\n  component: ManagePage,\n  children: [{\n    path: \"/user/change-role\",\n    component: ChangeRole\n  }, {\n    path: \"/creation/class-manage\",\n    component: ClassManage\n  }, {\n    path: \"/creation/tag-manage\",\n    component: TagManage\n  }, {\n    path: \"/creation/creation-manage\",\n    component: CreationManage\n  }, {\n    path: \"/creation/creation-examine\",\n    component: CreationExamine\n  }, {\n    path: \"/hairstyle/hairstyle-manage\",\n    component: HairstyleManage\n  }, {\n    path: \"/offline/request-manage\",\n    component: RequestManage\n  }],\n  meta: {\n    requiresAuth: true\n  }\n}];\n\n//创建路由器\nconst router = createRouter({\n  history: createWebHistory(),\n  routes: routes\n});\nrouter.beforeEach((to, from, next) => {\n  const tokenStore = useTokenStore();\n  const token = tokenStore.token;\n  if (to.path === '/login' && token) {\n    next('/'); // 已登录访问登录页 → 跳转首页\n  } else if (to.meta.requiresAuth && !token) {\n    next('/login');\n  } else {\n    next();\n  }\n});\n\n//导出路由器\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","Login_Register","HomePage","ManagePage","ChangeRole","ClassManage","TagManage","CreationManage","CreationExamine","HairstyleManage","RequestManage","useTokenStore","routes","path","component","meta","requiresAuth","children","router","history","beforeEach","to","from","next","tokenStore","token"],"sources":["C:/Users/32561/Desktop/毕设仓库/beauty-front/src/router/index.js"],"sourcesContent":["import {createRouter,createWebHistory} from 'vue-router'\r\n\r\n\r\nimport Login_Register from \"@/views/Login_Register.vue\";\r\nimport HomePage from \"@/views/HomePage.vue\";\r\nimport ManagePage from \"@/views/ManagePage.vue\";\r\nimport ChangeRole from \"@/views/manage/user/ChangeRole.vue\";\r\nimport ClassManage from \"@/views/manage/creation/ClassManage.vue\";\r\nimport TagManage from \"@/views/manage/creation/TagManage.vue\";\r\nimport CreationManage from \"@/views/manage/creation/CreationManage.vue\";\r\nimport CreationExamine from \"@/views/manage/creation/CreationExamine.vue\";\r\nimport HairstyleManage from \"@/views/manage/hairstyle/HairstyleManage.vue\";\r\nimport RequestManage from \"@/views/manage/offline/RequestManage.vue\";\r\nimport {useTokenStore} from \"@/stores/token\";\r\n\r\n\r\n//定义路由关系\r\nconst routes = [\r\n    {path: \"/login\",component: Login_Register},\r\n    {\r\n        path:\"/\",\r\n        component:HomePage,\r\n        meta: {requiresAuth: true}\r\n    },\r\n    {\r\n        path:\"/manage\",\r\n        component:ManagePage,\r\n        children:[\r\n            {path:\"/user/change-role\",component:ChangeRole},\r\n            {path: \"/creation/class-manage\",component:ClassManage},\r\n            {path: \"/creation/tag-manage\",component:TagManage},\r\n            {path:\"/creation/creation-manage\",component:CreationManage},\r\n            {path:\"/creation/creation-examine\",component:CreationExamine},\r\n            {path: \"/hairstyle/hairstyle-manage\",component:HairstyleManage},\r\n            {path: \"/offline/request-manage\",component:RequestManage},\r\n        ],\r\n        meta: {requiresAuth: true}\r\n    }\r\n]\r\n\r\n//创建路由器\r\nconst router = createRouter({\r\n    history: createWebHistory(),\r\n    routes: routes\r\n})\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n   const tokenStore = useTokenStore()\r\n    const token = tokenStore.token\r\n\r\n    if (to.path === '/login' && token) {\r\n        next('/') // 已登录访问登录页 → 跳转首页\r\n    } else if (to.meta.requiresAuth && !token) {\r\n        next('/login')\r\n    } else {\r\n        next()\r\n    }\r\n})\r\n\r\n//导出路由器\r\nexport default router;\r\n\r\n"],"mappings":"AAAA,SAAQA,YAAY,EAACC,gBAAgB,QAAO,YAAY;AAGxD,OAAOC,cAAc,MAAM,4BAA4B;AACvD,OAAOC,QAAQ,MAAM,sBAAsB;AAC3C,OAAOC,UAAU,MAAM,wBAAwB;AAC/C,OAAOC,UAAU,MAAM,oCAAoC;AAC3D,OAAOC,WAAW,MAAM,yCAAyC;AACjE,OAAOC,SAAS,MAAM,uCAAuC;AAC7D,OAAOC,cAAc,MAAM,4CAA4C;AACvE,OAAOC,eAAe,MAAM,6CAA6C;AACzE,OAAOC,eAAe,MAAM,8CAA8C;AAC1E,OAAOC,aAAa,MAAM,0CAA0C;AACpE,SAAQC,aAAa,QAAO,gBAAgB;;AAG5C;AACA,MAAMC,MAAM,GAAG,CACX;EAACC,IAAI,EAAE,QAAQ;EAACC,SAAS,EAAEb;AAAc,CAAC,EAC1C;EACIY,IAAI,EAAC,GAAG;EACRC,SAAS,EAACZ,QAAQ;EAClBa,IAAI,EAAE;IAACC,YAAY,EAAE;EAAI;AAC7B,CAAC,EACD;EACIH,IAAI,EAAC,SAAS;EACdC,SAAS,EAACX,UAAU;EACpBc,QAAQ,EAAC,CACL;IAACJ,IAAI,EAAC,mBAAmB;IAACC,SAAS,EAACV;EAAU,CAAC,EAC/C;IAACS,IAAI,EAAE,wBAAwB;IAACC,SAAS,EAACT;EAAW,CAAC,EACtD;IAACQ,IAAI,EAAE,sBAAsB;IAACC,SAAS,EAACR;EAAS,CAAC,EAClD;IAACO,IAAI,EAAC,2BAA2B;IAACC,SAAS,EAACP;EAAc,CAAC,EAC3D;IAACM,IAAI,EAAC,4BAA4B;IAACC,SAAS,EAACN;EAAe,CAAC,EAC7D;IAACK,IAAI,EAAE,6BAA6B;IAACC,SAAS,EAACL;EAAe,CAAC,EAC/D;IAACI,IAAI,EAAE,yBAAyB;IAACC,SAAS,EAACJ;EAAa,CAAC,CAC5D;EACDK,IAAI,EAAE;IAACC,YAAY,EAAE;EAAI;AAC7B,CAAC,CACJ;;AAED;AACA,MAAME,MAAM,GAAGnB,YAAY,CAAC;EACxBoB,OAAO,EAAEnB,gBAAgB,CAAC,CAAC;EAC3BY,MAAM,EAAEA;AACZ,CAAC,CAAC;AAEFM,MAAM,CAACE,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACnC,MAAMC,UAAU,GAAGb,aAAa,CAAC,CAAC;EACjC,MAAMc,KAAK,GAAGD,UAAU,CAACC,KAAK;EAE9B,IAAIJ,EAAE,CAACR,IAAI,KAAK,QAAQ,IAAIY,KAAK,EAAE;IAC/BF,IAAI,CAAC,GAAG,CAAC,EAAC;EACd,CAAC,MAAM,IAAIF,EAAE,CAACN,IAAI,CAACC,YAAY,IAAI,CAACS,KAAK,EAAE;IACvCF,IAAI,CAAC,QAAQ,CAAC;EAClB,CAAC,MAAM;IACHA,IAAI,CAAC,CAAC;EACV;AACJ,CAAC,CAAC;;AAEF;AACA,eAAeL,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}