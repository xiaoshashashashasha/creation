{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { Node, mergeAttributes, textblockTypeInputRule } from '@tiptap/core';\nimport { Selection, Plugin, PluginKey, TextSelection } from '@tiptap/pm/state';\n\n/**\n * Matches a code block with backticks.\n */\nconst backtickInputRegex = /^```([a-z]+)?[\\s\\n]$/;\n/**\n * Matches a code block with tildes.\n */\nconst tildeInputRegex = /^~~~([a-z]+)?[\\s\\n]$/;\n/**\n * This extension allows you to create code blocks.\n * @see https://tiptap.dev/api/nodes/code-block\n */\nconst CodeBlock = Node.create({\n  name: 'codeBlock',\n  addOptions() {\n    return {\n      languageClassPrefix: 'language-',\n      exitOnTripleEnter: true,\n      exitOnArrowDown: true,\n      defaultLanguage: null,\n      HTMLAttributes: {}\n    };\n  },\n  content: 'text*',\n  marks: '',\n  group: 'block',\n  code: true,\n  defining: true,\n  addAttributes() {\n    return {\n      language: {\n        default: this.options.defaultLanguage,\n        parseHTML: element => {\n          var _a;\n          const {\n            languageClassPrefix\n          } = this.options;\n          const classNames = [...(((_a = element.firstElementChild) === null || _a === void 0 ? void 0 : _a.classList) || [])];\n          const languages = classNames.filter(className => className.startsWith(languageClassPrefix)).map(className => className.replace(languageClassPrefix, ''));\n          const language = languages[0];\n          if (!language) {\n            return null;\n          }\n          return language;\n        },\n        rendered: false\n      }\n    };\n  },\n  parseHTML() {\n    return [{\n      tag: 'pre',\n      preserveWhitespace: 'full'\n    }];\n  },\n  renderHTML({\n    node,\n    HTMLAttributes\n  }) {\n    return ['pre', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), ['code', {\n      class: node.attrs.language ? this.options.languageClassPrefix + node.attrs.language : null\n    }, 0]];\n  },\n  addCommands() {\n    return {\n      setCodeBlock: attributes => ({\n        commands\n      }) => {\n        return commands.setNode(this.name, attributes);\n      },\n      toggleCodeBlock: attributes => ({\n        commands\n      }) => {\n        return commands.toggleNode(this.name, 'paragraph', attributes);\n      }\n    };\n  },\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Alt-c': () => this.editor.commands.toggleCodeBlock(),\n      // remove code block when at start of document or code block is empty\n      Backspace: () => {\n        const {\n          empty,\n          $anchor\n        } = this.editor.state.selection;\n        const isAtStart = $anchor.pos === 1;\n        if (!empty || $anchor.parent.type.name !== this.name) {\n          return false;\n        }\n        if (isAtStart || !$anchor.parent.textContent.length) {\n          return this.editor.commands.clearNodes();\n        }\n        return false;\n      },\n      // exit node on triple enter\n      Enter: ({\n        editor\n      }) => {\n        if (!this.options.exitOnTripleEnter) {\n          return false;\n        }\n        const {\n          state\n        } = editor;\n        const {\n          selection\n        } = state;\n        const {\n          $from,\n          empty\n        } = selection;\n        if (!empty || $from.parent.type !== this.type) {\n          return false;\n        }\n        const isAtEnd = $from.parentOffset === $from.parent.nodeSize - 2;\n        const endsWithDoubleNewline = $from.parent.textContent.endsWith('\\n\\n');\n        if (!isAtEnd || !endsWithDoubleNewline) {\n          return false;\n        }\n        return editor.chain().command(({\n          tr\n        }) => {\n          tr.delete($from.pos - 2, $from.pos);\n          return true;\n        }).exitCode().run();\n      },\n      // exit node on arrow down\n      ArrowDown: ({\n        editor\n      }) => {\n        if (!this.options.exitOnArrowDown) {\n          return false;\n        }\n        const {\n          state\n        } = editor;\n        const {\n          selection,\n          doc\n        } = state;\n        const {\n          $from,\n          empty\n        } = selection;\n        if (!empty || $from.parent.type !== this.type) {\n          return false;\n        }\n        const isAtEnd = $from.parentOffset === $from.parent.nodeSize - 2;\n        if (!isAtEnd) {\n          return false;\n        }\n        const after = $from.after();\n        if (after === undefined) {\n          return false;\n        }\n        const nodeAfter = doc.nodeAt(after);\n        if (nodeAfter) {\n          return editor.commands.command(({\n            tr\n          }) => {\n            tr.setSelection(Selection.near(doc.resolve(after)));\n            return true;\n          });\n        }\n        return editor.commands.exitCode();\n      }\n    };\n  },\n  addInputRules() {\n    return [textblockTypeInputRule({\n      find: backtickInputRegex,\n      type: this.type,\n      getAttributes: match => ({\n        language: match[1]\n      })\n    }), textblockTypeInputRule({\n      find: tildeInputRegex,\n      type: this.type,\n      getAttributes: match => ({\n        language: match[1]\n      })\n    })];\n  },\n  addProseMirrorPlugins() {\n    return [\n    // this plugin creates a code block for pasted content from VS Code\n    // we can also detect the copied code language\n    new Plugin({\n      key: new PluginKey('codeBlockVSCodeHandler'),\n      props: {\n        handlePaste: (view, event) => {\n          if (!event.clipboardData) {\n            return false;\n          }\n          // don’t create a new code block within code blocks\n          if (this.editor.isActive(this.type.name)) {\n            return false;\n          }\n          const text = event.clipboardData.getData('text/plain');\n          const vscode = event.clipboardData.getData('vscode-editor-data');\n          const vscodeData = vscode ? JSON.parse(vscode) : undefined;\n          const language = vscodeData === null || vscodeData === void 0 ? void 0 : vscodeData.mode;\n          if (!text || !language) {\n            return false;\n          }\n          const {\n            tr,\n            schema\n          } = view.state;\n          // prepare a text node\n          // strip carriage return chars from text pasted as code\n          // see: https://github.com/ProseMirror/prosemirror-view/commit/a50a6bcceb4ce52ac8fcc6162488d8875613aacd\n          const textNode = schema.text(text.replace(/\\r\\n?/g, '\\n'));\n          // create a code block with the text node\n          // replace selection with the code block\n          tr.replaceSelectionWith(this.type.create({\n            language\n          }, textNode));\n          if (tr.selection.$from.parent.type !== this.type) {\n            // put cursor inside the newly created code block\n            tr.setSelection(TextSelection.near(tr.doc.resolve(Math.max(0, tr.selection.from - 2))));\n          }\n          // store meta information\n          // this is useful for other plugins that depends on the paste event\n          // like the paste rule plugin\n          tr.setMeta('paste', true);\n          view.dispatch(tr);\n          return true;\n        }\n      }\n    })];\n  }\n});\nexport { CodeBlock, backtickInputRegex, CodeBlock as default, tildeInputRegex };","map":{"version":3,"names":["backtickInputRegex","tildeInputRegex","CodeBlock","Node","create","name","addOptions","languageClassPrefix","exitOnTripleEnter","exitOnArrowDown","defaultLanguage","HTMLAttributes","content","marks","group","code","defining","addAttributes","language","default","options","parseHTML","element","classNames","_a","firstElementChild","classList","languages","filter","className","startsWith","map","replace","rendered","tag","preserveWhitespace","renderHTML","node","mergeAttributes","class","attrs","addCommands","setCodeBlock","attributes","commands","setNode","toggleCodeBlock","toggleNode","addKeyboardShortcuts","Mod-Alt-c","editor","Backspace","empty","$anchor","state","selection","isAtStart","pos","parent","type","textContent","length","clearNodes","Enter","$from","isAtEnd","parentOffset","nodeSize","endsWithDoubleNewline","endsWith","chain","command","tr","delete","exitCode","run","ArrowDown","doc","after","undefined","nodeAfter","nodeAt","setSelection","Selection","near","resolve","addInputRules","textblockTypeInputRule","find","getAttributes","match","addProseMirrorPlugins","Plugin","key","PluginKey","props","handlePaste","view","event","clipboardData","isActive","text","getData","vscode","vscodeData","JSON","parse","mode","schema","textNode","replaceSelectionWith","TextSelection","Math","max","from","setMeta","dispatch"],"sources":["../src/code-block.ts"],"sourcesContent":["import { mergeAttributes, Node, textblockTypeInputRule } from '@tiptap/core'\nimport {\n  Plugin,\n  PluginKey,\n  Selection,\n  TextSelection,\n} from '@tiptap/pm/state'\n\nexport interface CodeBlockOptions {\n  /**\n   * Adds a prefix to language classes that are applied to code tags.\n   * @default 'language-'\n   */\n  languageClassPrefix: string\n  /**\n   * Define whether the node should be exited on triple enter.\n   * @default true\n   */\n  exitOnTripleEnter: boolean\n  /**\n   * Define whether the node should be exited on arrow down if there is no node after it.\n   * @default true\n   */\n  exitOnArrowDown: boolean\n  /**\n   * The default language.\n   * @default null\n   * @example 'js'\n   */\n  defaultLanguage: string | null | undefined\n  /**\n   * Custom HTML attributes that should be added to the rendered HTML tag.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    codeBlock: {\n      /**\n       * Set a code block\n       * @param attributes Code block attributes\n       * @example editor.commands.setCodeBlock({ language: 'javascript' })\n       */\n      setCodeBlock: (attributes?: { language: string }) => ReturnType\n      /**\n       * Toggle a code block\n       * @param attributes Code block attributes\n       * @example editor.commands.toggleCodeBlock({ language: 'javascript' })\n       */\n      toggleCodeBlock: (attributes?: { language: string }) => ReturnType\n    }\n  }\n}\n\n/**\n * Matches a code block with backticks.\n */\nexport const backtickInputRegex = /^```([a-z]+)?[\\s\\n]$/\n\n/**\n * Matches a code block with tildes.\n */\nexport const tildeInputRegex = /^~~~([a-z]+)?[\\s\\n]$/\n\n/**\n * This extension allows you to create code blocks.\n * @see https://tiptap.dev/api/nodes/code-block\n */\nexport const CodeBlock = Node.create<CodeBlockOptions>({\n  name: 'codeBlock',\n\n  addOptions() {\n    return {\n      languageClassPrefix: 'language-',\n      exitOnTripleEnter: true,\n      exitOnArrowDown: true,\n      defaultLanguage: null,\n      HTMLAttributes: {},\n    }\n  },\n\n  content: 'text*',\n\n  marks: '',\n\n  group: 'block',\n\n  code: true,\n\n  defining: true,\n\n  addAttributes() {\n    return {\n      language: {\n        default: this.options.defaultLanguage,\n        parseHTML: element => {\n          const { languageClassPrefix } = this.options\n          const classNames = [...(element.firstElementChild?.classList || [])]\n          const languages = classNames\n            .filter(className => className.startsWith(languageClassPrefix))\n            .map(className => className.replace(languageClassPrefix, ''))\n          const language = languages[0]\n\n          if (!language) {\n            return null\n          }\n\n          return language\n        },\n        rendered: false,\n      },\n    }\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'pre',\n        preserveWhitespace: 'full',\n      },\n    ]\n  },\n\n  renderHTML({ node, HTMLAttributes }) {\n    return [\n      'pre',\n      mergeAttributes(this.options.HTMLAttributes, HTMLAttributes),\n      [\n        'code',\n        {\n          class: node.attrs.language\n            ? this.options.languageClassPrefix + node.attrs.language\n            : null,\n        },\n        0,\n      ],\n    ]\n  },\n\n  addCommands() {\n    return {\n      setCodeBlock:\n        attributes => ({ commands }) => {\n          return commands.setNode(this.name, attributes)\n        },\n      toggleCodeBlock:\n        attributes => ({ commands }) => {\n          return commands.toggleNode(this.name, 'paragraph', attributes)\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Alt-c': () => this.editor.commands.toggleCodeBlock(),\n\n      // remove code block when at start of document or code block is empty\n      Backspace: () => {\n        const { empty, $anchor } = this.editor.state.selection\n        const isAtStart = $anchor.pos === 1\n\n        if (!empty || $anchor.parent.type.name !== this.name) {\n          return false\n        }\n\n        if (isAtStart || !$anchor.parent.textContent.length) {\n          return this.editor.commands.clearNodes()\n        }\n\n        return false\n      },\n\n      // exit node on triple enter\n      Enter: ({ editor }) => {\n        if (!this.options.exitOnTripleEnter) {\n          return false\n        }\n\n        const { state } = editor\n        const { selection } = state\n        const { $from, empty } = selection\n\n        if (!empty || $from.parent.type !== this.type) {\n          return false\n        }\n\n        const isAtEnd = $from.parentOffset === $from.parent.nodeSize - 2\n        const endsWithDoubleNewline = $from.parent.textContent.endsWith('\\n\\n')\n\n        if (!isAtEnd || !endsWithDoubleNewline) {\n          return false\n        }\n\n        return editor\n          .chain()\n          .command(({ tr }) => {\n            tr.delete($from.pos - 2, $from.pos)\n\n            return true\n          })\n          .exitCode()\n          .run()\n      },\n\n      // exit node on arrow down\n      ArrowDown: ({ editor }) => {\n        if (!this.options.exitOnArrowDown) {\n          return false\n        }\n\n        const { state } = editor\n        const { selection, doc } = state\n        const { $from, empty } = selection\n\n        if (!empty || $from.parent.type !== this.type) {\n          return false\n        }\n\n        const isAtEnd = $from.parentOffset === $from.parent.nodeSize - 2\n\n        if (!isAtEnd) {\n          return false\n        }\n\n        const after = $from.after()\n\n        if (after === undefined) {\n          return false\n        }\n\n        const nodeAfter = doc.nodeAt(after)\n\n        if (nodeAfter) {\n          return editor.commands.command(({ tr }) => {\n            tr.setSelection(Selection.near(doc.resolve(after)))\n            return true\n          })\n        }\n\n        return editor.commands.exitCode()\n      },\n    }\n  },\n\n  addInputRules() {\n    return [\n      textblockTypeInputRule({\n        find: backtickInputRegex,\n        type: this.type,\n        getAttributes: match => ({\n          language: match[1],\n        }),\n      }),\n      textblockTypeInputRule({\n        find: tildeInputRegex,\n        type: this.type,\n        getAttributes: match => ({\n          language: match[1],\n        }),\n      }),\n    ]\n  },\n\n  addProseMirrorPlugins() {\n    return [\n      // this plugin creates a code block for pasted content from VS Code\n      // we can also detect the copied code language\n      new Plugin({\n        key: new PluginKey('codeBlockVSCodeHandler'),\n        props: {\n          handlePaste: (view, event) => {\n            if (!event.clipboardData) {\n              return false\n            }\n\n            // don’t create a new code block within code blocks\n            if (this.editor.isActive(this.type.name)) {\n              return false\n            }\n\n            const text = event.clipboardData.getData('text/plain')\n            const vscode = event.clipboardData.getData('vscode-editor-data')\n            const vscodeData = vscode ? JSON.parse(vscode) : undefined\n            const language = vscodeData?.mode\n\n            if (!text || !language) {\n              return false\n            }\n\n            const { tr, schema } = view.state\n\n            // prepare a text node\n            // strip carriage return chars from text pasted as code\n            // see: https://github.com/ProseMirror/prosemirror-view/commit/a50a6bcceb4ce52ac8fcc6162488d8875613aacd\n            const textNode = schema.text(text.replace(/\\r\\n?/g, '\\n'))\n\n            // create a code block with the text node\n            // replace selection with the code block\n            tr.replaceSelectionWith(this.type.create({ language }, textNode))\n\n            if (tr.selection.$from.parent.type !== this.type) {\n              // put cursor inside the newly created code block\n              tr.setSelection(TextSelection.near(tr.doc.resolve(Math.max(0, tr.selection.from - 2))))\n            }\n\n            // store meta information\n            // this is useful for other plugins that depends on the paste event\n            // like the paste rule plugin\n            tr.setMeta('paste', true)\n\n            view.dispatch(tr)\n\n            return true\n          },\n        },\n      }),\n    ]\n  },\n})\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}