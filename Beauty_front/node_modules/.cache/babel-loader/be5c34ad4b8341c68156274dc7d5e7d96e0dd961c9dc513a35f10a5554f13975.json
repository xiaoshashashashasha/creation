{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.createDialogVisible = true)\n  }, {\n    default: _withCtx(() => _cache[9] || (_cache[9] = [_createTextVNode(\"新建发型\")])),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 编辑对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.editDialogVisible,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.editDialogVisible = $event),\n    title: \"编辑发型\",\n    width: \"600px\"\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_el_button, {\n      onClick: _cache[3] || (_cache[3] = $event => $setup.editDialogVisible = false)\n    }, {\n      default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\"取消\")])),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.handleSaveEdit\n    }, {\n      default: _withCtx(() => _cache[11] || (_cache[11] = [_createTextVNode(\"保存\")])),\n      _: 1 /* STABLE */\n    })]),\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      model: $setup.editForm,\n      \"label-width\": \"80px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"名称\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.editForm.hairstyle_name,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.editForm.hairstyle_name = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"内容\",\n        class: \"full-width-editor\"\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"QuillEditor\"], {\n          content: $setup.editForm.content,\n          \"onUpdate:content\": _cache[2] || (_cache[2] = $event => $setup.editForm.content = $event),\n          contentType: \"html\",\n          modules: $setup.getQuillModules($setup.quillRefEdit),\n          ref: \"quillRefEdit\",\n          style: {\n            \"height\": \"200px\"\n          }\n        }, null, 8 /* PROPS */, [\"content\", \"modules\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createCommentVNode(\" 新建对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.createDialogVisible,\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $setup.createDialogVisible = $event),\n    title: \"新建发型\",\n    width: \"600px\"\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_el_button, {\n      onClick: _cache[7] || (_cache[7] = $event => $setup.createDialogVisible = false)\n    }, {\n      default: _withCtx(() => _cache[12] || (_cache[12] = [_createTextVNode(\"取消\")])),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.handleCreateSubmit\n    }, {\n      default: _withCtx(() => _cache[13] || (_cache[13] = [_createTextVNode(\"创建\")])),\n      _: 1 /* STABLE */\n    })]),\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      model: $setup.createForm,\n      \"label-width\": \"80px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"名称\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.createForm.hairstyle_name,\n          \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.createForm.hairstyle_name = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"内容\",\n        class: \"full-width-editor\"\n      }, {\n        default: _withCtx(() => [_createVNode($setup[\"QuillEditor\"], {\n          content: $setup.createForm.content,\n          \"onUpdate:content\": _cache[6] || (_cache[6] = $event => $setup.createForm.content = $event),\n          contentType: \"html\",\n          modules: $setup.getQuillModules($setup.quillRefCreate),\n          ref: \"quillRefCreate\",\n          style: {\n            \"height\": \"200px\"\n          }\n        }, null, 8 /* PROPS */, [\"content\", \"modules\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementBlock","_Fragment","_createVNode","_component_el_button","type","onClick","_cache","$event","$setup","createDialogVisible","default","_withCtx","_createTextVNode","_","_createCommentVNode","_component_el_dialog","modelValue","editDialogVisible","title","width","footer","handleSaveEdit","_component_el_form","model","editForm","_component_el_form_item","label","_component_el_input","hairstyle_name","class","content","contentType","modules","getQuillModules","quillRefEdit","ref","style","handleCreateSubmit","createForm","quillRefCreate"],"sources":["C:\\Users\\32561\\Desktop\\毕设仓库\\beauty-front\\src\\views\\manage\\hairstyle\\HairstyleManage.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport { QuillEditor } from '@vueup/vue-quill'\r\nimport '@vueup/vue-quill/dist/vue-quill.snow.css'\r\n\r\nimport {\r\n  hairstyleList, hairstyleInfo,\r\n  hairstyleAdd, hairstyleDel,\r\n  hairstyleUpdate\r\n} from '@/api/hairstyle'\r\n\r\nimport { uploadFile } from '@/api/fileUpload'\r\n\r\nconst tableData = ref([])\r\nconst pageNum = ref(1)\r\nconst pageSize = ref(6)\r\nconst total = ref(0)\r\nconst keyWord = ref('')\r\nconst editDialogVisible = ref(false)\r\nconst createDialogVisible = ref(false)\r\nconst editForm = ref({})\r\nconst createForm = ref({\r\n  hairstyle_name: '',\r\n  hairstyle_pic: '',\r\n  content: ''\r\n})\r\nconst quillRefEdit = ref(null)\r\nconst quillRefCreate = ref(null)\r\n\r\n// Quill 配置\r\nconst getQuillModules = (quillRef) => ({\r\n  toolbar: {\r\n    container: [\r\n      ['bold', 'italic', 'underline'],\r\n      [{list: 'ordered'}, {list: 'bullet'}],\r\n      ['link', 'image']\r\n    ],\r\n    handlers: {\r\n      image() {\r\n        const input = document.createElement('input')\r\n        input.setAttribute('type', 'file')\r\n        input.setAttribute('accept', 'image/*')\r\n        input.click()\r\n\r\n        input.onchange = async () => {\r\n          const file = input.files[0]\r\n          if (!file || !quillRef.value) return\r\n\r\n          try {\r\n            const res = await uploadFile(file)\r\n            const imageUrl = res.data\r\n            const quill = quillRef.value.getEditor()\r\n            const range = quill.getSelection()\r\n            quill.insertEmbed(range.index, 'image', imageUrl)\r\n            quill.setSelection(range.index + 1)\r\n          } catch (err) {\r\n            ElMessage.error('图片上传失败')\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\n// 获取数据\r\nconst fetchData = async () => {\r\n  const res = await hairstyleList({pageNum: pageNum.value, pageSize: pageSize.value, keyWord: keyWord.value})\r\n  tableData.value = res.data.items\r\n  total.value = res.data.total\r\n}\r\n\r\nconst handleSaveEdit = async () => {\r\n  await hairstyleUpdate(editForm.value)\r\n  ElMessage.success('保存成功')\r\n  editDialogVisible.value = false\r\n  fetchData()\r\n}\r\n\r\nconst handleCreateSubmit = async () => {\r\n  await hairstyleAdd(createForm.value)\r\n  ElMessage.success('创建成功')\r\n  createDialogVisible.value = false\r\n  fetchData()\r\n}\r\n\r\nonMounted(fetchData)\r\n</script>\r\n\r\n<template>\r\n  <el-button type=\"primary\" @click=\"createDialogVisible = true\">新建发型</el-button>\r\n\r\n  <!-- 编辑对话框 -->\r\n  <el-dialog v-model=\"editDialogVisible\" title=\"编辑发型\" width=\"600px\">\r\n    <el-form :model=\"editForm\" label-width=\"80px\">\r\n      <el-form-item label=\"名称\">\r\n        <el-input v-model=\"editForm.hairstyle_name\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"内容\" class=\"full-width-editor\">\r\n        <QuillEditor\r\n            v-model:content=\"editForm.content\"\r\n            contentType=\"html\"\r\n            :modules=\"getQuillModules(quillRefEdit)\"\r\n            ref=\"quillRefEdit\"\r\n            style=\"height: 200px;\"\r\n        />\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <el-button @click=\"editDialogVisible = false\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"handleSaveEdit\">保存</el-button>\r\n    </template>\r\n  </el-dialog>\r\n\r\n  <!-- 新建对话框 -->\r\n  <el-dialog v-model=\"createDialogVisible\" title=\"新建发型\" width=\"600px\">\r\n    <el-form :model=\"createForm\" label-width=\"80px\">\r\n      <el-form-item label=\"名称\">\r\n        <el-input v-model=\"createForm.hairstyle_name\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"内容\" class=\"full-width-editor\">\r\n        <QuillEditor\r\n            v-model:content=\"createForm.content\"\r\n            contentType=\"html\"\r\n            :modules=\"getQuillModules(quillRefCreate)\"\r\n            ref=\"quillRefCreate\"\r\n            style=\"height: 200px;\"\r\n        />\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <el-button @click=\"createDialogVisible = false\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"handleCreateSubmit\">创建</el-button>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<style scoped>\r\n.full-width-editor .el-form-item__content {\r\n  margin-left: 0 !important;\r\n}\r\n</style>\r\n"],"mappings":";;;;;;;uBAAAA,mBAAA,CAAAC,SAAA,SA0FEC,YAAA,CAA8EC,oBAAA;IAAnEC,IAAI,EAAC,SAAS;IAAEC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAC,mBAAmB;;IA1FvDC,OAAA,EAAAC,QAAA,CA0FgE,MAAIL,MAAA,QAAAA,MAAA,OA1FpEM,gBAAA,CA0FgE,MAAI,E;IA1FpEC,CAAA;MA4FEC,mBAAA,WAAc,EACdZ,YAAA,CAmBYa,oBAAA;IAhHdC,UAAA,EA6FsBR,MAAA,CAAAS,iBAAiB;IA7FvC,uBAAAX,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA6FsBC,MAAA,CAAAS,iBAAiB,GAAAV,MAAA;IAAEW,KAAK,EAAC,MAAM;IAACC,KAAK,EAAC;;IAe7CC,MAAM,EAAAT,QAAA,CACf,MAA4D,CAA5DT,YAAA,CAA4DC,oBAAA;MAAhDE,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAS,iBAAiB;;MA7G1CP,OAAA,EAAAC,QAAA,CA6GoD,MAAEL,MAAA,SAAAA,MAAA,QA7GtDM,gBAAA,CA6GoD,IAAE,E;MA7GtDC,CAAA;QA8GMX,YAAA,CAAgEC,oBAAA;MAArDC,IAAI,EAAC,SAAS;MAAEC,OAAK,EAAEG,MAAA,CAAAa;;MA9GxCX,OAAA,EAAAC,QAAA,CA8GwD,MAAEL,MAAA,SAAAA,MAAA,QA9G1DM,gBAAA,CA8GwD,IAAE,E;MA9G1DC,CAAA;;IAAAH,OAAA,EAAAC,QAAA,CA8FI,MAaU,CAbVT,YAAA,CAaUoB,kBAAA;MAbAC,KAAK,EAAEf,MAAA,CAAAgB,QAAQ;MAAE,aAAW,EAAC;;MA9F3Cd,OAAA,EAAAC,QAAA,CA+FM,MAEe,CAFfT,YAAA,CAEeuB,uBAAA;QAFDC,KAAK,EAAC;MAAI;QA/F9BhB,OAAA,EAAAC,QAAA,CAgGQ,MAA6C,CAA7CT,YAAA,CAA6CyB,mBAAA;UAhGrDX,UAAA,EAgG2BR,MAAA,CAAAgB,QAAQ,CAACI,cAAc;UAhGlD,uBAAAtB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAgG2BC,MAAA,CAAAgB,QAAQ,CAACI,cAAc,GAAArB,MAAA;;QAhGlDM,CAAA;UAkGMX,YAAA,CAQeuB,uBAAA;QARDC,KAAK,EAAC,IAAI;QAACG,KAAK,EAAC;;QAlGrCnB,OAAA,EAAAC,QAAA,CAmGQ,MAME,CANFT,YAAA,CAMEM,MAAA;UALUsB,OAAO,EAAEtB,MAAA,CAAAgB,QAAQ,CAACM,OAAO;UApG7C,oBAAAxB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAoG6BC,MAAA,CAAAgB,QAAQ,CAACM,OAAO,GAAAvB,MAAA;UACjCwB,WAAW,EAAC,MAAM;UACjBC,OAAO,EAAExB,MAAA,CAAAyB,eAAe,CAACzB,MAAA,CAAA0B,YAAY;UACtCC,GAAG,EAAC,cAAc;UAClBC,KAAsB,EAAtB;YAAA;UAAA;;QAxGZvB,CAAA;;MAAAA,CAAA;;IAAAA,CAAA;qCAkHEC,mBAAA,WAAc,EACdZ,YAAA,CAmBYa,oBAAA;IAtIdC,UAAA,EAmHsBR,MAAA,CAAAC,mBAAmB;IAnHzC,uBAAAH,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAmHsBC,MAAA,CAAAC,mBAAmB,GAAAF,MAAA;IAAEW,KAAK,EAAC,MAAM;IAACC,KAAK,EAAC;;IAe/CC,MAAM,EAAAT,QAAA,CACf,MAA8D,CAA9DT,YAAA,CAA8DC,oBAAA;MAAlDE,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,MAAA,CAAAC,mBAAmB;;MAnI5CC,OAAA,EAAAC,QAAA,CAmIsD,MAAEL,MAAA,SAAAA,MAAA,QAnIxDM,gBAAA,CAmIsD,IAAE,E;MAnIxDC,CAAA;QAoIMX,YAAA,CAAoEC,oBAAA;MAAzDC,IAAI,EAAC,SAAS;MAAEC,OAAK,EAAEG,MAAA,CAAA6B;;MApIxC3B,OAAA,EAAAC,QAAA,CAoI4D,MAAEL,MAAA,SAAAA,MAAA,QApI9DM,gBAAA,CAoI4D,IAAE,E;MApI9DC,CAAA;;IAAAH,OAAA,EAAAC,QAAA,CAoHI,MAaU,CAbVT,YAAA,CAaUoB,kBAAA;MAbAC,KAAK,EAAEf,MAAA,CAAA8B,UAAU;MAAE,aAAW,EAAC;;MApH7C5B,OAAA,EAAAC,QAAA,CAqHM,MAEe,CAFfT,YAAA,CAEeuB,uBAAA;QAFDC,KAAK,EAAC;MAAI;QArH9BhB,OAAA,EAAAC,QAAA,CAsHQ,MAA+C,CAA/CT,YAAA,CAA+CyB,mBAAA;UAtHvDX,UAAA,EAsH2BR,MAAA,CAAA8B,UAAU,CAACV,cAAc;UAtHpD,uBAAAtB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAsH2BC,MAAA,CAAA8B,UAAU,CAACV,cAAc,GAAArB,MAAA;;QAtHpDM,CAAA;UAwHMX,YAAA,CAQeuB,uBAAA;QARDC,KAAK,EAAC,IAAI;QAACG,KAAK,EAAC;;QAxHrCnB,OAAA,EAAAC,QAAA,CAyHQ,MAME,CANFT,YAAA,CAMEM,MAAA;UALUsB,OAAO,EAAEtB,MAAA,CAAA8B,UAAU,CAACR,OAAO;UA1H/C,oBAAAxB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA0H6BC,MAAA,CAAA8B,UAAU,CAACR,OAAO,GAAAvB,MAAA;UACnCwB,WAAW,EAAC,MAAM;UACjBC,OAAO,EAAExB,MAAA,CAAAyB,eAAe,CAACzB,MAAA,CAAA+B,cAAc;UACxCJ,GAAG,EAAC,gBAAgB;UACpBC,KAAsB,EAAtB;YAAA;UAAA;;QA9HZvB,CAAA;;MAAAA,CAAA;;IAAAA,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}