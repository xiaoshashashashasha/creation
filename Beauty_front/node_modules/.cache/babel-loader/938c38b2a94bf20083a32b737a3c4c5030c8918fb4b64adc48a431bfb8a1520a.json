{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"search\"\n};\nconst _hoisted_2 = {\n  style: {\n    \"text-align\": \"center\",\n    \"margin-top\": \"20px\",\n    \"width\": \"100%\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_col = _resolveComponent(\"el-col\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  return _openBlock(), _createBlock(_component_el_row, null, {\n    default: _withCtx(() => [_createCommentVNode(\"路径部分\"), _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n      class: \"path\"\n    }, [_createElementVNode(\"p\", {\n      style: {\n        \"font-size\": \"20px\",\n        \"margin-top\": \"5px\"\n      }\n    }, \"更改权限\")], -1 /* HOISTED */)), _createCommentVNode(\" 搜索栏 \"), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_row, {\n      gutter: 10,\n      align: \"middle\",\n      style: {\n        \"padding\": \"10px\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_col, {\n        span: 4\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $setup.searchType,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchType = $event),\n          placeholder: \"搜索类型\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: \"用户ID\",\n            value: \"user_id\"\n          }), _createVNode(_component_el_option, {\n            label: \"用户名\",\n            value: \"username\"\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_col, {\n        span: 6\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.searchValue,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.searchValue = $event),\n          placeholder: \"请输入搜索内容\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_col, {\n        span: 4\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: $setup.handleSearch\n        }, {\n          default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"搜索\")])),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_button, {\n          onClick: $setup.handleReset\n        }, {\n          default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"重置\")])),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    })]), _createCommentVNode(\" 表格部分 \"), _createVNode(_component_el_table, {\n      data: $setup.tableData,\n      style: {\n        \"width\": \"100%\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"user_id\",\n        label: \"用户ID\",\n        width: \"120px\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"username\",\n        label: \"用户名\",\n        width: \"240px\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"nickname\",\n        label: \"昵称\",\n        width: \"160px\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"email\",\n        label: \"邮箱\",\n        width: \"200px\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"created_at\",\n        label: \"创建时间\",\n        width: \"240px\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"updated_at\",\n        label: \"更新时间\",\n        width: \"240px\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"角色\",\n        width: \"120px\"\n      }, {\n        default: _withCtx(({\n          row\n        }) => [_createVNode(_component_el_tag, {\n          type: row.role === 1 ? 'success' : row.role === 2 ? 'danger' : 'info',\n          \"disable-transitions\": \"\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(row.role === 0 ? '正常用户' : row.role === 1 ? '管理员' : '封禁中'), 1 /* TEXT */)]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        label: \"操作\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_button, {\n          onClick: $event => $setup.setRoleban(scope.row)\n        }, {\n          default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"封禁\")])),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_el_button, {\n          onClick: $event => $setup.setRoleuser(scope.row)\n        }, {\n          default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"设为用户\")])),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_el_button, {\n          onClick: $event => $setup.setRolemanager(scope.row)\n        }, {\n          default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"设为管理员\")])),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"]), _createCommentVNode(\" 分页 \"), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_pagination, {\n      background: \"\",\n      layout: \"prev, pager, next, jumper, ->, total\",\n      total: $setup.total,\n      \"current-page\": $setup.pageNum,\n      \"page-size\": $setup.pageSize,\n      onCurrentChange: $setup.handlePageChange\n    }, null, 8 /* PROPS */, [\"total\", \"current-page\", \"page-size\"])])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","style","_createBlock","_component_el_row","default","_withCtx","_createCommentVNode","_createElementVNode","_hoisted_1","_createVNode","gutter","align","_component_el_col","span","_component_el_select","modelValue","$setup","searchType","_cache","$event","placeholder","_component_el_option","label","value","_","_component_el_input","searchValue","_component_el_button","type","onClick","handleSearch","_createTextVNode","handleReset","_component_el_table","data","tableData","_component_el_table_column","prop","width","row","_component_el_tag","role","_toDisplayString","scope","setRoleban","setRoleuser","setRolemanager","_hoisted_2","_component_el_pagination","background","layout","total","pageNum","pageSize","onCurrentChange","handlePageChange"],"sources":["C:\\Users\\32561\\Desktop\\毕设仓库\\beauty-front\\src\\views\\manage\\user\\ChangeRole.vue"],"sourcesContent":["<script setup>\r\nimport { ref } from \"vue\"\r\nimport { userListService, userChangeRoleService } from \"@/api/user\"\r\nimport {ElMessage} from \"element-plus\";\r\n\r\n// 表格数据\r\nconst tableData = ref([])\r\n\r\n// 分页数据\r\nconst pageNum = ref(1)\r\nconst pageSize = ref(10)\r\nconst total = ref(0)\r\n\r\n// 搜索条件\r\nconst searchValue = ref('')\r\nconst searchType = ref('user_id')\r\n\r\nconst changeRole = async (user_id,role) => {\r\n  try {\r\n    await userChangeRoleService(user_id,role)\r\n    ElMessage.success('权限更改成功')\r\n\r\n    getUserList()\r\n  } catch (error) {\r\n    console.log(error)\r\n    ElMessage.error(error.message)\r\n  }\r\n}\r\n\r\n// 操作按钮\r\nfunction setRoleban(row) {\r\n  changeRole(row.user_id,2)\r\n}\r\nfunction setRoleuser(row) {\r\n  changeRole(row.user_id,0)\r\n}\r\nfunction setRolemanager(row) {\r\n  changeRole(row.user_id,1)\r\n}\r\n\r\n\r\n\r\n// 获取用户列表\r\nconst getUserList = async () => {\r\n  const params = {\r\n    pageNum: pageNum.value,\r\n    pageSize: pageSize.value,\r\n  }\r\n\r\n  if (searchType.value === 'user_id' && searchValue.value) {\r\n    params.user_id = parseInt(searchValue.value)\r\n  } else if (searchType.value === 'username' && searchValue.value) {\r\n    params.keyWord = searchValue.value\r\n  }\r\n\r\n  try {\r\n    const result = await userListService(params)\r\n    tableData.value = result.data.items\r\n    total.value = result.data.total\r\n  } catch (err) {\r\n    console.error('获取用户列表失败:', err)\r\n  }\r\n}\r\n\r\n// 搜索按钮\r\nconst handleSearch = () => {\r\n  pageNum.value = 1\r\n  getUserList()\r\n}\r\n\r\n// 重置按钮\r\nconst handleReset = () => {\r\n  searchValue.value = ''\r\n  searchType.value = 'user_id'\r\n  pageNum.value = 1\r\n  getUserList()\r\n}\r\n\r\n// 分页变化\r\nconst handlePageChange = (newPage) => {\r\n  pageNum.value = newPage\r\n  getUserList()\r\n}\r\n\r\n// 初始化加载\r\ngetUserList()\r\n</script>\r\n\r\n<template>\r\n  <el-row>\r\n    <!--路径部分-->\r\n    <div class=\"path\">\r\n      <p style=\"font-size: 20px; margin-top: 5px\">更改权限</p>\r\n    </div>\r\n\r\n    <!-- 搜索栏 -->\r\n    <div class=\"search\">\r\n      <el-row :gutter=\"10\" align=\"middle\" style=\"padding: 10px;\">\r\n        <el-col :span=\"4\">\r\n          <el-select v-model=\"searchType\" placeholder=\"搜索类型\">\r\n            <el-option label=\"用户ID\" value=\"user_id\"/>\r\n            <el-option label=\"用户名\" value=\"username\"/>\r\n          </el-select>\r\n        </el-col>\r\n        <el-col :span=\"6\">\r\n          <el-input v-model=\"searchValue\" placeholder=\"请输入搜索内容\"/>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"handleSearch\">搜索</el-button>\r\n          <el-button @click=\"handleReset\">重置</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n\r\n    <!-- 表格部分 -->\r\n    <el-table :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column prop=\"user_id\" label=\"用户ID\" width=\"120px\"/>\r\n      <el-table-column prop=\"username\" label=\"用户名\" width=\"240px\"/>\r\n      <el-table-column prop=\"nickname\" label=\"昵称\" width=\"160px\"/>\r\n      <el-table-column prop=\"email\" label=\"邮箱\" width=\"200px\"/>\r\n      <el-table-column prop=\"created_at\" label=\"创建时间\" width=\"240px\"/>\r\n      <el-table-column prop=\"updated_at\" label=\"更新时间\" width=\"240px\"/>\r\n      <el-table-column label=\"角色\" width=\"120px\">\r\n        <template #default=\"{ row }\">\r\n          <el-tag\r\n              :type=\"row.role === 1 ? 'success' : row.role === 2 ? 'danger' : 'info'\"\r\n              disable-transitions\r\n          >\r\n            {{ row.role === 0 ? '正常用户' : row.role === 1 ? '管理员' : '封禁中' }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"操作\">\r\n        <template #default=\"scope\">\r\n          <el-button @click=\"setRoleban(scope.row)\">封禁</el-button>\r\n          <el-button @click=\"setRoleuser(scope.row)\">设为用户</el-button>\r\n          <el-button @click=\"setRolemanager(scope.row)\">设为管理员</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页 -->\r\n    <div style=\"text-align: center; margin-top: 20px; width: 100%\">\r\n      <el-pagination\r\n          background\r\n          layout=\"prev, pager, next, jumper, ->, total\"\r\n          :total=\"total\"\r\n          :current-page=\"pageNum\"\r\n          :page-size=\"pageSize\"\r\n          @current-change=\"handlePageChange\"\r\n      />\r\n    </div>\r\n  </el-row>\r\n</template>\r\n\r\n<style scoped>\r\n.path {\r\n  height: 40px;\r\n  width: 100%;\r\n  background-color: #d8a6a6;\r\n}\r\n.search {\r\n  width: 100%;\r\n  background-color: #bbd2e3;\r\n  height: 52px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}