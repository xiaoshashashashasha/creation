{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nimport { ElMessage } from \"element-plus\";\nimport { creationTagList, creationTagAdd, creationTagDel } from \"@/api/creation\";\n\n// 表格数据\n\nexport default {\n  __name: 'TagManage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const tableData = ref([]);\n    const tagNameInput = ref('');\n    const pageNum = ref(1);\n    const pageSize = ref(5);\n    const total = ref(0);\n\n    // 获取标签列表\n    const fetchTagList = async () => {\n      try {\n        const result = await creationTagList({\n          pageNum: pageNum.value,\n          pageSize: pageSize.value\n        });\n        tableData.value = result.data.items;\n        total.value = result.data.total;\n      } catch (err) {\n        ElMessage.error(err.msg || \"标签获取失败\");\n      }\n    };\n\n    // 添加标签\n    const handleAddTag = async () => {\n      if (!tagNameInput.value.trim()) {\n        ElMessage.warning(\"标签名不能为空\");\n        return;\n      }\n      try {\n        await creationTagAdd({\n          tag_name: tagNameInput.value.trim()\n        });\n        ElMessage.success(\"标签添加成功\");\n        tagNameInput.value = '';\n        pageNum.value = 1; // 回到第一页\n        fetchTagList();\n      } catch (err) {\n        ElMessage.error(err.msg || \"添加失败\");\n      }\n    };\n\n    // 删除标签\n    const handleDelete = async row => {\n      try {\n        await creationTagDel(row.tag_id);\n        ElMessage.success(\"删除成功\");\n        fetchTagList();\n      } catch (err) {\n        ElMessage.error(err.msg || \"删除失败\");\n      }\n    };\n\n    // 页码变更\n    const handlePageChange = newPage => {\n      pageNum.value = newPage;\n      fetchTagList();\n    };\n\n    // 初始化\n    onMounted(() => {\n      fetchTagList();\n    });\n    const __returned__ = {\n      tableData,\n      tagNameInput,\n      pageNum,\n      pageSize,\n      total,\n      fetchTagList,\n      handleAddTag,\n      handleDelete,\n      handlePageChange,\n      ref,\n      onMounted,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get creationTagList() {\n        return creationTagList;\n      },\n      get creationTagAdd() {\n        return creationTagAdd;\n      },\n      get creationTagDel() {\n        return creationTagDel;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","ElMessage","creationTagList","creationTagAdd","creationTagDel","tableData","tagNameInput","pageNum","pageSize","total","fetchTagList","result","value","data","items","err","error","msg","handleAddTag","trim","warning","tag_name","success","handleDelete","row","tag_id","handlePageChange","newPage"],"sources":["C:/Users/32561/Desktop/毕设仓库/beauty-front/src/views/manage/creation/TagManage.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted } from \"vue\"\r\nimport { ElMessage } from \"element-plus\"\r\nimport { creationTagList, creationTagAdd, creationTagDel } from \"@/api/creation\"\r\n\r\n// 表格数据\r\nconst tableData = ref([])\r\nconst tagNameInput = ref('')\r\nconst pageNum = ref(1)\r\nconst pageSize = ref(5)\r\nconst total = ref(0)\r\n\r\n// 获取标签列表\r\nconst fetchTagList = async () => {\r\n  try {\r\n    const result = await creationTagList({\r\n      pageNum: pageNum.value,\r\n      pageSize: pageSize.value\r\n    })\r\n    tableData.value = result.data.items\r\n    total.value = result.data.total\r\n  } catch (err) {\r\n    ElMessage.error(err.msg || \"标签获取失败\")\r\n  }\r\n}\r\n\r\n// 添加标签\r\nconst handleAddTag = async () => {\r\n  if (!tagNameInput.value.trim()) {\r\n    ElMessage.warning(\"标签名不能为空\")\r\n    return\r\n  }\r\n\r\n  try {\r\n    await creationTagAdd({ tag_name: tagNameInput.value.trim() })\r\n    ElMessage.success(\"标签添加成功\")\r\n    tagNameInput.value = ''\r\n    pageNum.value = 1 // 回到第一页\r\n    fetchTagList()\r\n  } catch (err) {\r\n    ElMessage.error(err.msg || \"添加失败\")\r\n  }\r\n}\r\n\r\n// 删除标签\r\nconst handleDelete = async (row) => {\r\n  try {\r\n    await creationTagDel(row.tag_id)\r\n    ElMessage.success(\"删除成功\")\r\n    fetchTagList()\r\n  } catch (err) {\r\n    ElMessage.error(err.msg || \"删除失败\")\r\n  }\r\n}\r\n\r\n// 页码变更\r\nconst handlePageChange = (newPage) => {\r\n  pageNum.value = newPage\r\n  fetchTagList()\r\n}\r\n\r\n// 初始化\r\nonMounted(() => {\r\n  fetchTagList()\r\n})\r\n</script>\r\n\r\n<template>\r\n  <el-row :gutter=\"0\">\r\n    <!--路径部分-->\r\n    <div class=\"path\">\r\n      <p style=\"font-size: 20px; margin-top: 5px\">标签管理</p>\r\n    </div>\r\n\r\n    <!-- 搜索栏 -->\r\n    <div class=\"search\">\r\n\r\n    </div>\r\n    <!-- 表格区域 -->\r\n    <el-col :span=\"14\">\r\n      <el-table :data=\"tableData\" style=\"width: 100%\">\r\n        <el-table-column prop=\"tag_id\" label=\"标签ID\" width=\"180px\"/>\r\n        <el-table-column prop=\"tag_name\" label=\"标签名\" width=\"320px\"/>\r\n        <el-table-column prop=\"created_at\" label=\"创建时间\" width=\"320px\"/>\r\n        <el-table-column label=\"操作\" width=\"180px\">\r\n          <template #default=\"{ row }\">\r\n            <el-button type=\"danger\" size=\"small\" @click=\"handleDelete(row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页 -->\r\n      <div style=\"text-align: center; margin-top: 20px;\">\r\n        <el-pagination\r\n            background\r\n            layout=\"prev, pager, next, ->, total\"\r\n            :total=\"total\"\r\n            :current-page=\"pageNum\"\r\n            :page-size=\"pageSize\"\r\n            @current-change=\"handlePageChange\"\r\n        />\r\n      </div>\r\n    </el-col>\r\n\r\n    <!-- 添加标签区域 -->\r\n    <el-col :span=\"10\">\r\n      <div class=\"add-box\">\r\n        <h3>添加标签</h3>\r\n        <el-form @submit.prevent>\r\n          <el-form-item>\r\n            <el-input v-model=\"tagNameInput\" placeholder=\"请输入标签名\"/>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" class=\"btn\" @click=\"handleAddTag\">添加</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<style scoped>\r\n\r\n.path {\r\n  height: 40px;\r\n  width: 100%;\r\n  background-color: #d8a6a6;\r\n}\r\n\r\n.search {\r\n  width: 100%;\r\n  height: 52px;\r\n  background-color: #bbd2e3;\r\n}\r\n\r\n.add-box {\r\n  background-color: #f9f9f9;\r\n  padding: 30px 20px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 6px;\r\n  height: 900px;\r\n  position: relative;\r\n}\r\n\r\nh3 {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n  font-weight: normal;\r\n}\r\n\r\n.btn{\r\n  position: absolute;\r\n  left: 46%;\r\n  margin-top: 40px;\r\n}\r\n</style>\r\n"],"mappings":"AACA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,SAASC,SAAS,QAAQ,cAAc;AACxC,SAASC,eAAe,EAAEC,cAAc,EAAEC,cAAc,QAAQ,gBAAgB;;AAEhF;;;;;;;;IACA,MAAMC,SAAS,GAAGN,GAAG,CAAC,EAAE,CAAC;IACzB,MAAMO,YAAY,GAAGP,GAAG,CAAC,EAAE,CAAC;IAC5B,MAAMQ,OAAO,GAAGR,GAAG,CAAC,CAAC,CAAC;IACtB,MAAMS,QAAQ,GAAGT,GAAG,CAAC,CAAC,CAAC;IACvB,MAAMU,KAAK,GAAGV,GAAG,CAAC,CAAC,CAAC;;IAEpB;IACA,MAAMW,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMC,MAAM,GAAG,MAAMT,eAAe,CAAC;UACnCK,OAAO,EAAEA,OAAO,CAACK,KAAK;UACtBJ,QAAQ,EAAEA,QAAQ,CAACI;QACrB,CAAC,CAAC;QACFP,SAAS,CAACO,KAAK,GAAGD,MAAM,CAACE,IAAI,CAACC,KAAK;QACnCL,KAAK,CAACG,KAAK,GAAGD,MAAM,CAACE,IAAI,CAACJ,KAAK;MACjC,CAAC,CAAC,OAAOM,GAAG,EAAE;QACZd,SAAS,CAACe,KAAK,CAACD,GAAG,CAACE,GAAG,IAAI,QAAQ,CAAC;MACtC;IACF,CAAC;;IAED;IACA,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI,CAACZ,YAAY,CAACM,KAAK,CAACO,IAAI,CAAC,CAAC,EAAE;QAC9BlB,SAAS,CAACmB,OAAO,CAAC,SAAS,CAAC;QAC5B;MACF;MAEA,IAAI;QACF,MAAMjB,cAAc,CAAC;UAAEkB,QAAQ,EAAEf,YAAY,CAACM,KAAK,CAACO,IAAI,CAAC;QAAE,CAAC,CAAC;QAC7DlB,SAAS,CAACqB,OAAO,CAAC,QAAQ,CAAC;QAC3BhB,YAAY,CAACM,KAAK,GAAG,EAAE;QACvBL,OAAO,CAACK,KAAK,GAAG,CAAC,EAAC;QAClBF,YAAY,CAAC,CAAC;MAChB,CAAC,CAAC,OAAOK,GAAG,EAAE;QACZd,SAAS,CAACe,KAAK,CAACD,GAAG,CAACE,GAAG,IAAI,MAAM,CAAC;MACpC;IACF,CAAC;;IAED;IACA,MAAMM,YAAY,GAAG,MAAOC,GAAG,IAAK;MAClC,IAAI;QACF,MAAMpB,cAAc,CAACoB,GAAG,CAACC,MAAM,CAAC;QAChCxB,SAAS,CAACqB,OAAO,CAAC,MAAM,CAAC;QACzBZ,YAAY,CAAC,CAAC;MAChB,CAAC,CAAC,OAAOK,GAAG,EAAE;QACZd,SAAS,CAACe,KAAK,CAACD,GAAG,CAACE,GAAG,IAAI,MAAM,CAAC;MACpC;IACF,CAAC;;IAED;IACA,MAAMS,gBAAgB,GAAIC,OAAO,IAAK;MACpCpB,OAAO,CAACK,KAAK,GAAGe,OAAO;MACvBjB,YAAY,CAAC,CAAC;IAChB,CAAC;;IAED;IACAV,SAAS,CAAC,MAAM;MACdU,YAAY,CAAC,CAAC;IAChB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}