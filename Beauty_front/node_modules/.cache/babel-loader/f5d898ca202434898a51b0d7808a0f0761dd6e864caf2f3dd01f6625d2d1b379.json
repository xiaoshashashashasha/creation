{"ast":null,"code":"import { openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"editor-wrapper\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return $props.visible ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [$setup.editorRef ? (_openBlock(), _createBlock($setup[\"Toolbar\"], {\n    key: 0,\n    editor: $setup.editorRef,\n    defaultConfig: $setup.toolbarConfig,\n    mode: \"default\"\n  }, null, 8 /* PROPS */, [\"editor\"])) : _createCommentVNode(\"v-if\", true), _createVNode($setup[\"Editor\"], {\n    defaultConfig: $setup.editorConfig,\n    mode: \"default\",\n    style: {\n      \"height\": \"180px\",\n      \"width\": \"100%\",\n      \"overflow-y\": \"auto\"\n    },\n    onOnCreated: $setup.handleEditorCreated,\n    onOnChange: $setup.handleEditorChange\n  })])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["key","class","$props","visible","_createElementBlock","_hoisted_1","$setup","editorRef","_createBlock","editor","defaultConfig","toolbarConfig","mode","_createCommentVNode","_createVNode","editorConfig","style","onOnCreated","handleEditorCreated","onOnChange","handleEditorChange"],"sources":["C:\\Users\\32561\\Desktop\\毕设仓库\\beauty-front\\src\\components\\RichTextEditor.vue"],"sourcesContent":["<template>\r\n  <div class=\"editor-wrapper\" v-if=\"visible\">\r\n    <Toolbar\r\n        v-if=\"editorRef\"\r\n        :editor=\"editorRef\"\r\n        :defaultConfig=\"toolbarConfig\"\r\n        mode=\"default\"\r\n    />\r\n    <Editor\r\n        :defaultConfig=\"editorConfig\"\r\n        mode=\"default\"\r\n        style=\"height: 180px; width: 100%; overflow-y: auto\"\r\n        @onCreated=\"handleEditorCreated\"\r\n        @onChange=\"handleEditorChange\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { shallowRef, watch, onBeforeUnmount, nextTick } from 'vue'\r\nimport { Editor, Toolbar } from '@wangeditor/editor-for-vue'\r\nimport '@wangeditor/editor/dist/css/style.css'\r\nimport { uploadFile } from '@/api/fileUpload'\r\nimport { ElMessage } from 'element-plus'\r\nimport { decode } from 'html-entities'\r\n\r\nconst props = defineProps({\r\n  modelValue: String,\r\n  visible: Boolean\r\n})\r\nconst emit = defineEmits(['update:modelValue'])\r\n\r\nconst editorRef = shallowRef()\r\n\r\ndefineExpose({\r\n  editorRef\r\n})\r\n\r\n\r\nconst editorConfig = {\r\n  placeholder: '请输入内容...',\r\n  MENU_CONF: {\r\n    uploadImage: {\r\n      async customUpload(file, insertFn) {\r\n        try {\r\n          const res = await uploadFile(file)\r\n          insertFn(res.data, '', '')\r\n          ElMessage.success('图片上传成功')\r\n        } catch {\r\n          ElMessage.error('图片上传失败')\r\n        }\r\n      }\r\n    }\r\n  },\r\n  MENU_KEYS: [\r\n    'bold', 'italic', 'underline',             // 基础样式\r\n    'color', 'bgColor',                        // 颜色\r\n    'fontSize', 'fontFamily', 'lineHeight',    // 字体、行高\r\n    'justifyLeft', 'justifyCenter', 'justifyRight', // 对齐\r\n    'emotion',                                 // 表情\r\n    'uploadImage',                             // 图片上传\r\n    'undo', 'redo',                            // 撤销恢复\r\n  ]\r\n}\r\nconst toolbarConfig = {\r\n  toolbarKeys: editorConfig.MENU_KEYS\r\n}\r\n\r\nconst handleEditorChange = (editor) => {\r\n  const html = decode(editor.getHtml())\r\n  emit('update:modelValue', html)\r\n}\r\n\r\nconst handleEditorCreated = (editor) => {\r\n  editorRef.value = editor\r\n  nextTick(() => {\r\n    if (props.modelValue) {\r\n      editor.clear()\r\n      editor.setHtml(props.modelValue)\r\n    }\r\n  })\r\n}\r\n\r\nwatch(() => props.visible, (val) => {\r\n  if (!val && editorRef.value) {\r\n    editorRef.value.destroy()\r\n    editorRef.value = null\r\n  }\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n  if (editorRef.value) {\r\n    editorRef.value.destroy()\r\n    editorRef.value = null\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.editor-wrapper {\r\n  border: 1px solid #dcdfe6;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n}\r\n\r\n</style>\r\n\r\n"],"mappings":";;EAAAA,GAAA;EACOC,KAAK,EAAC;;;SAAuBC,MAAA,CAAAC,OAAO,I,cAAzCC,mBAAA,CAcM,OAdNC,UAcM,GAZMC,MAAA,CAAAC,SAAS,I,cADnBC,YAAA,CAKEF,MAAA;IAPNN,GAAA;IAISS,MAAM,EAAEH,MAAA,CAAAC,SAAS;IACjBG,aAAa,EAAEJ,MAAA,CAAAK,aAAa;IAC7BC,IAAI,EAAC;yCANbC,mBAAA,gBAQIC,YAAA,CAMER,MAAA;IALGI,aAAa,EAAEJ,MAAA,CAAAS,YAAY;IAC5BH,IAAI,EAAC,SAAS;IACdI,KAAoD,EAApD;MAAA;MAAA;MAAA;IAAA,CAAoD;IACnDC,WAAS,EAAEX,MAAA,CAAAY,mBAAmB;IAC9BC,UAAQ,EAAEb,MAAA,CAAAc;UAbnBP,mBAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}