{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"creation-page\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  class: \"form-section\"\n};\nconst _hoisted_4 = {\n  class: \"upload-box\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"editor-section\"\n};\nconst _hoisted_7 = {\n  class: \"submit-btn\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_button, {\n    icon: \"el-icon-arrow-left\",\n    onClick: _cache[0] || (_cache[0] = $event => $setup.router.back())\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"返回\")])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_form, {\n    model: $setup.form,\n    \"label-width\": \"80px\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"封面\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_4, [$setup.form.cover_pic ? (_openBlock(), _createElementBlock(\"img\", {\n        key: 0,\n        src: $setup.form.cover_pic,\n        class: \"cover-img\"\n      }, null, 8 /* PROPS */, _hoisted_5)) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_upload, {\n        \"http-request\": $setup.handleUpload,\n        \"show-file-list\": false,\n        accept: \"image/*\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\"\n        }, {\n          default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"上传封面\")])),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      })])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"标题\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.form.title,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.title = $event),\n        placeholder: \"1~10字\",\n        maxlength: \"10\",\n        \"show-word-limit\": \"\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"摘要\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.form.abs_text,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.abs_text = $event),\n        placeholder: \"1~30字\",\n        maxlength: \"30\",\n        \"show-word-limit\": \"\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\"])]), _createElementVNode(\"div\", _hoisted_6, [_createVNode($setup[\"RichTextEditor\"], {\n    modelValue: $setup.form.content,\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.content = $event),\n    visible: true\n  }, null, 8 /* PROPS */, [\"modelValue\"])]), _createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_el_button, {\n    type: \"success\",\n    onClick: $setup.handleSubmit,\n    loading: $setup.loading\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"发布\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"loading\"])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_button","icon","onClick","_cache","$event","$setup","router","back","default","_withCtx","_createTextVNode","_","_hoisted_3","_component_el_form","model","form","_component_el_form_item","label","_hoisted_4","cover_pic","key","src","_hoisted_5","_createCommentVNode","_component_el_upload","handleUpload","accept","type","_component_el_input","modelValue","title","placeholder","maxlength","abs_text","_hoisted_6","content","visible","_hoisted_7","handleSubmit","loading"],"sources":["C:\\Users\\32561\\Desktop\\毕设仓库\\beauty-front\\src\\views\\CreateCreationPage.vue"],"sourcesContent":["<script setup>\r\nimport { ref } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\nimport { uploadFile } from '@/api/fileUpload'\r\nimport { addCreation } from '@/api/creation'\r\nimport RichTextEditor from '@/components/RichTextEditor.vue'\r\n\r\nconst router = useRouter()\r\n\r\nconst form = ref({\r\n  title: '',\r\n  abs_text: '',\r\n  cover_pic: '',\r\n  content: '',\r\n  class_id: 1 // 默认分类 id\r\n})\r\n\r\nconst loading = ref(false)\r\n\r\nconst handleUpload = async ({ file }) => {\r\n  try {\r\n    const res = await uploadFile(file)\r\n    form.value.cover_pic = res.data\r\n    ElMessage.success('上传成功')\r\n  } catch {\r\n    ElMessage.error('上传失败')\r\n  }\r\n}\r\n\r\nconst handleSubmit = async () => {\r\n  if (!form.value.title || !form.value.abs_text || !form.value.cover_pic || !form.value.content) {\r\n    return ElMessage.warning('请完整填写内容')\r\n  }\r\n  loading.value = true\r\n  try {\r\n    await addCreation({ ...form.value })\r\n    ElMessage.success('发布成功')\r\n    router.back()\r\n  } catch (err) {\r\n    ElMessage.error('发布失败')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div class=\"creation-page\">\r\n    <div class=\"header\">\r\n      <el-button icon=\"el-icon-arrow-left\" @click=\"router.back()\">返回</el-button>\r\n    </div>\r\n\r\n    <div class=\"form-section\">\r\n      <el-form :model=\"form\" label-width=\"80px\">\r\n        <el-form-item label=\"封面\">\r\n          <div class=\"upload-box\">\r\n            <img v-if=\"form.cover_pic\" :src=\"form.cover_pic\" class=\"cover-img\" />\r\n            <el-upload :http-request=\"handleUpload\" :show-file-list=\"false\" accept=\"image/*\">\r\n              <el-button type=\"primary\">上传封面</el-button>\r\n            </el-upload>\r\n          </div>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"标题\">\r\n          <el-input v-model=\"form.title\" placeholder=\"1~10字\" maxlength=\"10\" show-word-limit />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"摘要\">\r\n          <el-input v-model=\"form.abs_text\" placeholder=\"1~30字\" maxlength=\"30\" show-word-limit />\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n\r\n    <div class=\"editor-section\">\r\n      <RichTextEditor v-model=\"form.content\" :visible=\"true\" />\r\n    </div>\r\n\r\n    <div class=\"submit-btn\">\r\n      <el-button type=\"success\" @click=\"handleSubmit\" :loading=\"loading\">发布</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.creation-page {\r\n  max-width: 1080px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  background-color: #fff;\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.header {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.upload-box {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.cover-img {\r\n  width: 200px;\r\n  height: 120px;\r\n  object-fit: cover;\r\n  border-radius: 4px;\r\n  border: 1px solid #eee;\r\n}\r\n\r\n.form-section {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.editor-section {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.submit-btn {\r\n  text-align: center;\r\n  margin-top: 30px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}