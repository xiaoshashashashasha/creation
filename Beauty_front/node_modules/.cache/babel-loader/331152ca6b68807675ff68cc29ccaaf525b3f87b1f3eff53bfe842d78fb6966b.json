{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport ManageSwitch from \"@/components/ManageSwitch.vue\";\nimport router from \"@/router\";\nimport { computed, ref, onMounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useStateStore } from \"@/stores/state\";\nimport { userLogoutService } from \"@/api/user\";\nimport { useTokenStore } from \"@/stores/token\";\nimport { watchEffect } from \"vue-demi\";\nexport default {\n  __name: 'beauty_top',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const stateStore = useStateStore();\n\n    // 基于 role 值的三个控制变量\n    const content = computed(() => [0, 1, 2].includes(stateStore.sta));\n    const create = computed(() => [0, 1].includes(stateStore.sta));\n    const Mswitch = computed(() => stateStore.sta === 1);\n    const toCreate = () => {\n      router.push(`/create`);\n    };\n    const toCreations = () => {\n      router.push(`/creations`);\n    };\n    const toHairstyles = () => {\n      router.push(`/hairstyles`);\n    };\n    const toOfflines = () => {\n      router.push(`/offlines`);\n    };\n    const logout = async () => {\n      try {\n        await userLogoutService();\n        const tokenStore = useTokenStore();\n        const stateStore = useStateStore();\n        tokenStore.removeToken();\n        stateStore.setState(3);\n        router.push('/login');\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    const route = useRoute();\n    const isManageMode = ref(route.path.startsWith('/manage'));\n    watchEffect(() => {\n      const currentPath = route.path;\n      isManageMode.value = !currentPath.startsWith('/manage');\n    });\n    const handleModeChange = value => {\n      isManageMode.value = value;\n      if (value) {\n        // 切换到普通视图\n        router.push('/');\n      } else {\n        // 切换到管理视图\n        router.push('/manage');\n      }\n    };\n    const __returned__ = {\n      stateStore,\n      content,\n      create,\n      Mswitch,\n      toCreate,\n      toCreations,\n      toHairstyles,\n      toOfflines,\n      logout,\n      route,\n      isManageMode,\n      handleModeChange,\n      ManageSwitch,\n      get router() {\n        return router;\n      },\n      computed,\n      ref,\n      onMounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get useStateStore() {\n        return useStateStore;\n      },\n      get userLogoutService() {\n        return userLogoutService;\n      },\n      get useTokenStore() {\n        return useTokenStore;\n      },\n      get watchEffect() {\n        return watchEffect;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ManageSwitch","router","computed","ref","onMounted","useRoute","useStateStore","userLogoutService","useTokenStore","watchEffect","stateStore","content","includes","sta","create","Mswitch","toCreate","push","toCreations","toHairstyles","toOfflines","logout","tokenStore","removeToken","setState","error","console","log","route","isManageMode","path","startsWith","currentPath","value","handleModeChange"],"sources":["C:/Users/32561/Desktop/毕设仓库/beauty-front/src/components/beauty_top.vue"],"sourcesContent":["<script setup>\r\nimport ManageSwitch from \"@/components/ManageSwitch.vue\";\r\nimport router from \"@/router\";\r\nimport { computed, ref, onMounted } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport {useStateStore} from \"@/stores/state\";\r\nimport {userLogoutService} from \"@/api/user\";\r\nimport {useTokenStore} from \"@/stores/token\";\r\nimport {watchEffect} from \"vue-demi\";\r\n\r\n\r\nconst stateStore = useStateStore()\r\n\r\n// 基于 role 值的三个控制变量\r\nconst content = computed(() => [0, 1, 2].includes(stateStore.sta))\r\nconst create = computed(() => [0, 1].includes(stateStore.sta))\r\nconst Mswitch = computed(() => stateStore.sta === 1)\r\n\r\nconst toCreate = ()=>{\r\n  router.push(`/create`)\r\n}\r\n\r\nconst toCreations = ()=>{\r\n  router.push(`/creations`)\r\n}\r\n\r\nconst toHairstyles = ()=>{\r\n  router.push(`/hairstyles`)\r\n}\r\n\r\nconst toOfflines = () => {\r\n  router.push(`/offlines`)\r\n}\r\n\r\nconst logout = async () => {\r\n  try {\r\n    await userLogoutService()\r\n\r\n    const tokenStore = useTokenStore()\r\n    const stateStore = useStateStore()\r\n\r\n    tokenStore.removeToken()\r\n    stateStore.setState(3)\r\n    router.push('/login')\r\n  }catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\nconst route = useRoute()\r\n\r\nconst isManageMode = ref(route.path.startsWith('/manage'))\r\n\r\n\r\n\r\nwatchEffect(() => {\r\n  const currentPath = route.path\r\n  isManageMode.value = !currentPath.startsWith('/manage')\r\n})\r\n\r\n\r\nconst handleModeChange = (value) => {\r\n  isManageMode.value = value\r\n  if (value) {\r\n    // 切换到普通视图\r\n    router.push('/')\r\n  } else {\r\n    // 切换到管理视图\r\n    router.push('/manage')\r\n  }\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"top-box\">\r\n    <p class=\"logo\">Beauty</p>\r\n\r\n    <!-- 显示按钮部分 -->\r\n    <template v-if=\"create\">\r\n      <el-button class=\"plus_btn\" @click=\"toCreate\">+</el-button>\r\n    </template>\r\n\r\n    <template v-if=\"content\">\r\n      <el-button class=\"creation_btn\" @click=\"toCreations\">内 容</el-button>\r\n      <el-button class=\"hairstyle_btn\" @click=\"toHairstyles\">发 型</el-button>\r\n      <el-button class=\"offline_btn\" @click=\"toOfflines\">线下门店</el-button>\r\n    </template>\r\n\r\n    <ManageSwitch\r\n        v-if=\"Mswitch\"\r\n        class=\"manage-switch\"\r\n        v-model=\"isManageMode\"\r\n        @modeChange=\"handleModeChange\"\r\n    />\r\n\r\n\r\n    <el-button v-if=\"content\" class=\"logout_btn\" type=\"danger\" @click=\"logout\">退<br/>出</el-button>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.top-box {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 60px;\r\n  background: #beccd3;\r\n}\r\n\r\n.logo {\r\n  font-size: 38px;\r\n  font-family: 'Segoe Script';\r\n}\r\n\r\n.plus_btn {\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-65%);\r\n  font-size: 60px;\r\n  top: 5px;\r\n  height: 50px;\r\n  width: 50px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.creation_btn {\r\n  position: absolute;\r\n  font-size: 26px;\r\n  top: 5px;\r\n  right: 17%;\r\n  width: 100px;\r\n  height: 50px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.hairstyle_btn {\r\n  position: absolute;\r\n  font-size: 26px;\r\n  top: 5px;\r\n  right: 10%;\r\n  width: 100px;\r\n  height: 50px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.offline_btn {\r\n  position: absolute;\r\n  font-size: 26px;\r\n  top: 5px;\r\n  right: 2%;\r\n  width: 120px;\r\n  height: 50px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.manage-switch {\r\n  position: absolute;\r\n  top: 10px;\r\n  left: 20%;\r\n}\r\n\r\n.logout_btn {\r\n  position: absolute;\r\n  top: 5px;\r\n  right: 0;\r\n  height: 50px;\r\n  width: 30px;\r\n  border-radius: 10px;\r\n}\r\n\r\n</style>\r\n"],"mappings":";AACA,OAAOA,YAAY,MAAM,+BAA+B;AACxD,OAAOC,MAAM,MAAM,UAAU;AAC7B,SAASC,QAAQ,EAAEC,GAAG,EAAEC,SAAS,QAAQ,KAAK;AAC9C,SAASC,QAAQ,QAAQ,YAAY;AACrC,SAAQC,aAAa,QAAO,gBAAgB;AAC5C,SAAQC,iBAAiB,QAAO,YAAY;AAC5C,SAAQC,aAAa,QAAO,gBAAgB;AAC5C,SAAQC,WAAW,QAAO,UAAU;;;;;;;IAGpC,MAAMC,UAAU,GAAGJ,aAAa,CAAC,CAAC;;IAElC;IACA,MAAMK,OAAO,GAAGT,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAACU,QAAQ,CAACF,UAAU,CAACG,GAAG,CAAC,CAAC;IAClE,MAAMC,MAAM,GAAGZ,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAACU,QAAQ,CAACF,UAAU,CAACG,GAAG,CAAC,CAAC;IAC9D,MAAME,OAAO,GAAGb,QAAQ,CAAC,MAAMQ,UAAU,CAACG,GAAG,KAAK,CAAC,CAAC;IAEpD,MAAMG,QAAQ,GAAGA,CAAA,KAAI;MACnBf,MAAM,CAACgB,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IAED,MAAMC,WAAW,GAAGA,CAAA,KAAI;MACtBjB,MAAM,CAACgB,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;IAED,MAAME,YAAY,GAAGA,CAAA,KAAI;MACvBlB,MAAM,CAACgB,IAAI,CAAC,aAAa,CAAC;IAC5B,CAAC;IAED,MAAMG,UAAU,GAAGA,CAAA,KAAM;MACvBnB,MAAM,CAACgB,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC;IAED,MAAMI,MAAM,GAAG,MAAAA,CAAA,KAAY;MACzB,IAAI;QACF,MAAMd,iBAAiB,CAAC,CAAC;QAEzB,MAAMe,UAAU,GAAGd,aAAa,CAAC,CAAC;QAClC,MAAME,UAAU,GAAGJ,aAAa,CAAC,CAAC;QAElCgB,UAAU,CAACC,WAAW,CAAC,CAAC;QACxBb,UAAU,CAACc,QAAQ,CAAC,CAAC,CAAC;QACtBvB,MAAM,CAACgB,IAAI,CAAC,QAAQ,CAAC;MACvB,CAAC,QAAOQ,KAAK,EAAE;QACbC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACpB;IACF,CAAC;IAED,MAAMG,KAAK,GAAGvB,QAAQ,CAAC,CAAC;IAExB,MAAMwB,YAAY,GAAG1B,GAAG,CAACyB,KAAK,CAACE,IAAI,CAACC,UAAU,CAAC,SAAS,CAAC,CAAC;IAI1DtB,WAAW,CAAC,MAAM;MAChB,MAAMuB,WAAW,GAAGJ,KAAK,CAACE,IAAI;MAC9BD,YAAY,CAACI,KAAK,GAAG,CAACD,WAAW,CAACD,UAAU,CAAC,SAAS,CAAC;IACzD,CAAC,CAAC;IAGF,MAAMG,gBAAgB,GAAID,KAAK,IAAK;MAClCJ,YAAY,CAACI,KAAK,GAAGA,KAAK;MAC1B,IAAIA,KAAK,EAAE;QACT;QACAhC,MAAM,CAACgB,IAAI,CAAC,GAAG,CAAC;MAClB,CAAC,MAAM;QACL;QACAhB,MAAM,CAACgB,IAAI,CAAC,SAAS,CAAC;MACxB;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}