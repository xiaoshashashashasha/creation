{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from 'vue';\nimport { creationInfo } from '@/api/creation';\nimport { nextTick } from \"vue-demi\";\nimport { useRouter } from \"vue-router\";\n\n// 组件的props\n\nexport default {\n  __name: 'CardCreation',\n  props: {\n    creation_id: {\n      type: Number,\n      // 使用数值类型\n      required: true\n    },\n    loading: {\n      type: Boolean,\n      default: true\n    }\n  },\n  emits: ['update-loading1'],\n  setup(__props, {\n    expose: __expose,\n    emit: __emit\n  }) {\n    __expose();\n    const props = __props;\n    const image = ref('');\n    const title = ref('');\n    const abs_text = ref('');\n    const loading = ref(true);\n    const router = useRouter();\n    const toContent = () => {\n      router.push(`/content/creation/${props.creation_id}`);\n    };\n    const fetchData = async () => {\n      try {\n        const res = await creationInfo(props.creation_id);\n        if (res && res.data) {\n          image.value = res.data.cover_pic;\n          title.value = res.data.title;\n          abs_text.value = res.data.abs_text;\n          nextTick(() => {\n            loading.value = false; // 更新 loading 状态\n            emit('update-loading1', false);\n          });\n        } else {\n          throw new Error(\"数据未能正确返回\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n        loading.value = false; // 即使出错也会关闭骨架屏\n        emit('update-loading1', false);\n      }\n    };\n\n    // 在组件挂载时请求数据\n    onMounted(() => {\n      fetchData();\n    });\n\n    // 触发事件来通知父组件\n    const emit = __emit;\n    const __returned__ = {\n      props,\n      image,\n      title,\n      abs_text,\n      loading,\n      router,\n      toContent,\n      fetchData,\n      emit,\n      ref,\n      onMounted,\n      get creationInfo() {\n        return creationInfo;\n      },\n      get nextTick() {\n        return nextTick;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","creationInfo","nextTick","useRouter","props","__props","image","title","abs_text","loading","router","toContent","push","creation_id","fetchData","res","data","value","cover_pic","emit","Error","error","console","__emit"],"sources":["C:/Users/32561/Desktop/毕设仓库/beauty-front/src/components/CardCreation.vue"],"sourcesContent":["<template>\r\n  <div class=\"article-card\" @click=\"toContent\">\r\n    <el-skeleton :loading=\"loading\" animated>\r\n      <template #template>\r\n        <!-- 图片骨架 -->\r\n        <el-skeleton-item variant=\"image\" style=\"width: 280px; height: 140px;\"/>\r\n        <!-- 标题骨架 -->\r\n        <el-skeleton-item variant=\"text\" style=\"width: 130px; height: 35px; margin-top: 10px;\"/>\r\n        <!-- 摘要骨架 -->\r\n        <el-skeleton-item variant=\"text\" style=\"width: 260px; height: 35px;  margin-top: 10px;\"/>\r\n      </template>\r\n\r\n      <template #default>\r\n        <img :src=\"image\" alt=\"文章图片\" class=\"card-image\"/>\r\n        <div class=\"card-title\">{{ title }}</div>\r\n        <div class=\"card-summary\">{{ abs_text }}</div>\r\n      </template>\r\n    </el-skeleton>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport {ref, onMounted} from 'vue'\r\nimport {creationInfo} from '@/api/creation'\r\nimport {nextTick} from \"vue-demi\";\r\nimport {useRouter} from \"vue-router\";\r\n\r\n// 组件的props\r\nconst props = defineProps({\r\n  creation_id: {\r\n    type: Number, // 使用数值类型\r\n    required: true\r\n  },\r\n  loading: {\r\n    type: Boolean,\r\n    default: true\r\n  }\r\n})\r\n\r\nconst image = ref('')\r\nconst title = ref('')\r\nconst abs_text = ref('')\r\nconst loading = ref(true)\r\nconst router = useRouter()\r\n\r\nconst toContent = ()=>{\r\n  router.push(`/content/creation/${props.creation_id}`)\r\n}\r\n\r\nconst fetchData = async () => {\r\n  try {\r\n    const res = await creationInfo(props.creation_id)\r\n    if (res && res.data) {\r\n      image.value = res.data.cover_pic\r\n      title.value = res.data.title\r\n      abs_text.value = res.data.abs_text\r\n      nextTick(() => {\r\n        loading.value = false // 更新 loading 状态\r\n        emit('update-loading1', false)\r\n      })\r\n    } else {\r\n      throw new Error(\"数据未能正确返回\")\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error fetching data:\", error)\r\n    loading.value = false // 即使出错也会关闭骨架屏\r\n    emit('update-loading1', false)\r\n  }\r\n}\r\n\r\n// 在组件挂载时请求数据\r\nonMounted(() => {\r\n  fetchData()\r\n})\r\n\r\n// 触发事件来通知父组件\r\nconst emit = defineEmits(['update-loading1'])\r\n</script>\r\n\r\n<style scoped>\r\n.article-card {\r\n  width: 280px;\r\n  height: 240px;\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n  overflow: hidden;\r\n  background-color: #fff;\r\n}\r\n\r\n.card-image {\r\n  width: 100%;\r\n  height: 140px;\r\n  object-fit: cover;\r\n}\r\n\r\n.card-title,\r\n.card-summary {\r\n  width: 100%;\r\n  height: 50px;\r\n  line-height: 50px;\r\n  padding: 0 10px;\r\n  font-size: 16px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.card-title {\r\n  font-weight: bold;\r\n  color: #333;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.card-summary {\r\n  color: #666;\r\n}\r\n</style>\r\n"],"mappings":";AAsBA,SAAQA,GAAG,EAAEC,SAAS,QAAO,KAAK;AAClC,SAAQC,YAAY,QAAO,gBAAgB;AAC3C,SAAQC,QAAQ,QAAO,UAAU;AACjC,SAAQC,SAAS,QAAO,YAAY;;AAEpC;;;;;;;;;;;;;;;;;;;;;IACA,MAAMC,KAAK,GAAGC,OASZ;IAEF,MAAMC,KAAK,GAAGP,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMQ,KAAK,GAAGR,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMS,QAAQ,GAAGT,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMU,OAAO,GAAGV,GAAG,CAAC,IAAI,CAAC;IACzB,MAAMW,MAAM,GAAGP,SAAS,CAAC,CAAC;IAE1B,MAAMQ,SAAS,GAAGA,CAAA,KAAI;MACpBD,MAAM,CAACE,IAAI,CAAC,qBAAqBR,KAAK,CAACS,WAAW,EAAE,CAAC;IACvD,CAAC;IAED,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMd,YAAY,CAACG,KAAK,CAACS,WAAW,CAAC;QACjD,IAAIE,GAAG,IAAIA,GAAG,CAACC,IAAI,EAAE;UACnBV,KAAK,CAACW,KAAK,GAAGF,GAAG,CAACC,IAAI,CAACE,SAAS;UAChCX,KAAK,CAACU,KAAK,GAAGF,GAAG,CAACC,IAAI,CAACT,KAAK;UAC5BC,QAAQ,CAACS,KAAK,GAAGF,GAAG,CAACC,IAAI,CAACR,QAAQ;UAClCN,QAAQ,CAAC,MAAM;YACbO,OAAO,CAACQ,KAAK,GAAG,KAAK,EAAC;YACtBE,IAAI,CAAC,iBAAiB,EAAE,KAAK,CAAC;UAChC,CAAC,CAAC;QACJ,CAAC,MAAM;UACL,MAAM,IAAIC,KAAK,CAAC,UAAU,CAAC;QAC7B;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;QAC5CZ,OAAO,CAACQ,KAAK,GAAG,KAAK,EAAC;QACtBE,IAAI,CAAC,iBAAiB,EAAE,KAAK,CAAC;MAChC;IACF,CAAC;;IAED;IACAnB,SAAS,CAAC,MAAM;MACdc,SAAS,CAAC,CAAC;IACb,CAAC,CAAC;;IAEF;IACA,MAAMK,IAAI,GAAGI,MAAgC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}