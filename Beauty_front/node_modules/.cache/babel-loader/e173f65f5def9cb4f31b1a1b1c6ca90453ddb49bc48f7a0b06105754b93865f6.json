{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createVNode as _createVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"top-box\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[6] || (_cache[6] = _createElementVNode(\"p\", {\n    class: \"logo\"\n  }, \"Beauty\", -1 /* HOISTED */)), _createCommentVNode(\" 显示按钮部分 \"), $setup.create ? (_openBlock(), _createBlock(_component_el_button, {\n    key: 0,\n    class: \"plus_btn\",\n    onClick: $setup.toCreate\n  }, {\n    default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"+\")])),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), $setup.content ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createVNode(_component_el_button, {\n    class: \"creation_btn\",\n    onClick: $setup.toCreations\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"内 容\")])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_button, {\n    class: \"hairstyle_btn\",\n    onClick: $setup.toHairstyles\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"发 型\")])),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_button, {\n    class: \"offline_btn\",\n    onClick: $setup.toOfflines\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"线下门店\")])),\n    _: 1 /* STABLE */\n  })], 64 /* STABLE_FRAGMENT */)) : _createCommentVNode(\"v-if\", true), $setup.Mswitch ? (_openBlock(), _createBlock($setup[\"ManageSwitch\"], {\n    key: 2,\n    class: \"manage-switch\",\n    modelValue: $setup.isManageMode,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.isManageMode = $event),\n    onModeChange: $setup.handleModeChange\n  }, null, 8 /* PROPS */, [\"modelValue\"])) : _createCommentVNode(\"v-if\", true), $setup.content ? (_openBlock(), _createBlock(_component_el_button, {\n    key: 3,\n    class: \"logout_btn\",\n    type: \"danger\",\n    onClick: $setup.logout\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"退\"), _createElementVNode(\"br\", null, null, -1 /* HOISTED */), _createTextVNode(\"出\")])),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","$setup","create","_createBlock","_component_el_button","key","onClick","toCreate","default","_withCtx","_cache","_createTextVNode","_","content","_Fragment","_createVNode","toCreations","toHairstyles","toOfflines","Mswitch","modelValue","isManageMode","$event","onModeChange","handleModeChange","type","logout"],"sources":["C:\\Users\\32561\\Desktop\\毕设仓库\\beauty-front\\src\\components\\beauty_top.vue"],"sourcesContent":["<script setup>\r\nimport ManageSwitch from \"@/components/ManageSwitch.vue\";\r\nimport router from \"@/router\";\r\nimport { computed, ref, onMounted } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nimport {useStateStore} from \"@/stores/state\";\r\nimport {userLogoutService} from \"@/api/user\";\r\nimport {useTokenStore} from \"@/stores/token\";\r\nimport {watchEffect} from \"vue-demi\";\r\n\r\n\r\nconst stateStore = useStateStore()\r\n\r\n// 基于 role 值的三个控制变量\r\nconst content = computed(() => [0, 1, 2].includes(stateStore.sta))\r\nconst create = computed(() => [0, 1].includes(stateStore.sta))\r\nconst Mswitch = computed(() => stateStore.sta === 1)\r\n\r\nconst toCreate = ()=>{\r\n  router.push(`/create`)\r\n}\r\n\r\nconst toCreations = ()=>{\r\n  router.push(`/creations`)\r\n}\r\n\r\nconst toHairstyles = ()=>{\r\n  router.push(`/hairstyles`)\r\n}\r\n\r\nconst toOfflines = () => {\r\n  router.push(`/offlines`)\r\n}\r\n\r\nconst logout = async () => {\r\n  try {\r\n    await userLogoutService()\r\n\r\n    const tokenStore = useTokenStore()\r\n    const stateStore = useStateStore()\r\n\r\n    tokenStore.removeToken()\r\n    stateStore.setState(3)\r\n    router.push('/login')\r\n  }catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\nconst route = useRoute()\r\n\r\nconst isManageMode = ref(route.path.startsWith('/manage'))\r\n\r\n\r\n\r\nwatchEffect(() => {\r\n  const currentPath = route.path\r\n  isManageMode.value = !currentPath.startsWith('/manage')\r\n  console.log(isManageMode.value)\r\n})\r\n\r\n\r\nconst handleModeChange = (value) => {\r\n  isManageMode.value = value\r\n  if (value) {\r\n    // 切换到普通视图\r\n    router.push('/')\r\n  } else {\r\n    // 切换到管理视图\r\n    router.push('/manage')\r\n  }\r\n}\r\n\r\n\r\n\r\n</script>\r\n\r\n<template>\r\n  <div class=\"top-box\">\r\n    <p class=\"logo\">Beauty</p>\r\n\r\n    <!-- 显示按钮部分 -->\r\n    <template v-if=\"create\">\r\n      <el-button class=\"plus_btn\" @click=\"toCreate\">+</el-button>\r\n    </template>\r\n\r\n    <template v-if=\"content\">\r\n      <el-button class=\"creation_btn\" @click=\"toCreations\">内 容</el-button>\r\n      <el-button class=\"hairstyle_btn\" @click=\"toHairstyles\">发 型</el-button>\r\n      <el-button class=\"offline_btn\" @click=\"toOfflines\">线下门店</el-button>\r\n    </template>\r\n\r\n    <ManageSwitch\r\n        v-if=\"Mswitch\"\r\n        class=\"manage-switch\"\r\n        v-model=\"isManageMode\"\r\n        @modeChange=\"handleModeChange\"\r\n    />\r\n\r\n\r\n    <el-button v-if=\"content\" class=\"logout_btn\" type=\"danger\" @click=\"logout\">退<br/>出</el-button>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.top-box {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 60px;\r\n  background: #beccd3;\r\n}\r\n\r\n.logo {\r\n  font-size: 38px;\r\n  font-family: 'Segoe Script';\r\n}\r\n\r\n.plus_btn {\r\n  position: absolute;\r\n  left: 50%;\r\n  transform: translateX(-65%);\r\n  font-size: 60px;\r\n  top: 5px;\r\n  height: 50px;\r\n  width: 50px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.creation_btn {\r\n  position: absolute;\r\n  font-size: 26px;\r\n  top: 5px;\r\n  right: 17%;\r\n  width: 100px;\r\n  height: 50px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.hairstyle_btn {\r\n  position: absolute;\r\n  font-size: 26px;\r\n  top: 5px;\r\n  right: 10%;\r\n  width: 100px;\r\n  height: 50px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.offline_btn {\r\n  position: absolute;\r\n  font-size: 26px;\r\n  top: 5px;\r\n  right: 2%;\r\n  width: 120px;\r\n  height: 50px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.manage-switch {\r\n  position: absolute;\r\n  top: 10px;\r\n  left: 20%;\r\n}\r\n\r\n.logout_btn {\r\n  position: absolute;\r\n  top: 5px;\r\n  right: 0;\r\n  height: 50px;\r\n  width: 30px;\r\n  border-radius: 10px;\r\n}\r\n\r\n</style>\r\n"],"mappings":";;EA8EOA,KAAK,EAAC;AAAS;;;uBAApBC,mBAAA,CAuBM,OAvBNC,UAuBM,G,0BAtBJC,mBAAA,CAA0B;IAAvBH,KAAK,EAAC;EAAM,GAAC,QAAM,sBAEtBI,mBAAA,YAAe,EACCC,MAAA,CAAAC,MAAM,I,cACpBC,YAAA,CAA2DC,oBAAA;IAnFjEC,GAAA;IAmFiBT,KAAK,EAAC,UAAU;IAAEU,OAAK,EAAEL,MAAA,CAAAM;;IAnF1CC,OAAA,EAAAC,QAAA,CAmFoD,MAACC,MAAA,QAAAA,MAAA,OAnFrDC,gBAAA,CAmFoD,GAAC,E;IAnFrDC,CAAA;QAAAZ,mBAAA,gBAsFoBC,MAAA,CAAAY,OAAO,I,cAAvBhB,mBAAA,CAIWiB,SAAA;IA1FfT,GAAA;EAAA,IAuFMU,YAAA,CAAoEX,oBAAA;IAAzDR,KAAK,EAAC,cAAc;IAAEU,OAAK,EAAEL,MAAA,CAAAe;;IAvF9CR,OAAA,EAAAC,QAAA,CAuF2D,MAAGC,MAAA,QAAAA,MAAA,OAvF9DC,gBAAA,CAuF2D,KAAG,E;IAvF9DC,CAAA;MAwFMG,YAAA,CAAsEX,oBAAA;IAA3DR,KAAK,EAAC,eAAe;IAAEU,OAAK,EAAEL,MAAA,CAAAgB;;IAxF/CT,OAAA,EAAAC,QAAA,CAwF6D,MAAGC,MAAA,QAAAA,MAAA,OAxFhEC,gBAAA,CAwF6D,KAAG,E;IAxFhEC,CAAA;MAyFMG,YAAA,CAAmEX,oBAAA;IAAxDR,KAAK,EAAC,aAAa;IAAEU,OAAK,EAAEL,MAAA,CAAAiB;;IAzF7CV,OAAA,EAAAC,QAAA,CAyFyD,MAAIC,MAAA,QAAAA,MAAA,OAzF7DC,gBAAA,CAyFyD,MAAI,E;IAzF7DC,CAAA;oCAAAZ,mBAAA,gBA6FcC,MAAA,CAAAkB,OAAO,I,cADjBhB,YAAA,CAKEF,MAAA;IAjGNI,GAAA;IA8FQT,KAAK,EAAC,eAAe;IA9F7BwB,UAAA,EA+FiBnB,MAAA,CAAAoB,YAAY;IA/F7B,uBAAAX,MAAA,QAAAA,MAAA,MAAAY,MAAA,IA+FiBrB,MAAA,CAAAoB,YAAY,GAAAC,MAAA;IACpBC,YAAU,EAAEtB,MAAA,CAAAuB;6CAhGrBxB,mBAAA,gBAoGqBC,MAAA,CAAAY,OAAO,I,cAAxBV,YAAA,CAA8FC,oBAAA;IApGlGC,GAAA;IAoG8BT,KAAK,EAAC,YAAY;IAAC6B,IAAI,EAAC,QAAQ;IAAEnB,OAAK,EAAEL,MAAA,CAAAyB;;IApGvElB,OAAA,EAAAC,QAAA,CAoG+E,MAACC,MAAA,QAAAA,MAAA,OApGhFC,gBAAA,CAoG+E,GAAC,GAAAZ,mBAAA,CAAK,qCApGrFY,gBAAA,CAoGqF,GAAC,E;IApGtFC,CAAA;QAAAZ,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}